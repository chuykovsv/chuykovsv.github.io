{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./fog_modules/Core/Core.js","webpack:///./fog_modules/Components/Mesh.js","webpack:///./fog_modules/Math/Mat4.js","webpack:///./fog_modules/Components/Camera.js","webpack:///./fog_modules/Math/Vec3.js","webpack:///./fog_modules/Components/Movement.js","webpack:///./fog_modules/Components/Rotation.js","webpack:///./fog_modules/Components/ATrigger.js","webpack:///./fog_modules/Components/BTrigger.js","webpack:///./fog_modules/Components/STrigger.js","webpack:///./fog_modules/Components/Animator.js","webpack:///./fog_modules/Math/Quat.js","webpack:///./fog_modules/Components/Transform.js","webpack:///./fog_modules/Components/OrbitControl.js","webpack:///./fog_modules/Systems/TimeSystem.js","webpack:///./fog_modules/Systems/InputSystem.js","webpack:///./fog_modules/Systems/ScreenSystem.js","webpack:///./fog_modules/Math/DMap.js","webpack:///./fog_modules/Math/Batch.js","webpack:///./fog_modules/Systems/RenderSystem.js","webpack:///./fog_modules/Systems/RotationSystem.js","webpack:///./fog_modules/Systems/MovementSystem.js","webpack:///./fog_modules/Systems/OrbitControlSystem.js","webpack:///./fog_modules/Systems/TransformSystem.js","webpack:///./fog_modules/Systems/TriggerSystem.js","webpack:///./fog_modules/Systems/GameSystemHelper.js","webpack:///./fog_modules/Systems/GameSystem.js","webpack:///./fog_modules/Math/Vec2.js","webpack:///./fog_modules/Math/Vec4.js","webpack:///./fog_modules/Math/TLayer.js","webpack:///./fog_modules/Resources/Shader.js","webpack:///./fog_modules/Loaders/RawShaderLoader.js","webpack:///./fog_modules/Resources/Material.js","webpack:///./fog_modules/Loaders/MaterialLoader.js","webpack:///./fog_modules/Loaders/ImageLoader.js","webpack:///./fog_modules/Resources/Texture.js","webpack:///./fog_modules/Loaders/Texture2DLoader.js","webpack:///./fog_modules/Resources/Geometry.js","webpack:///./fog_modules/Loaders/GeometryLoader.js","webpack:///./fog_modules/Loaders/SceneLoader.js","webpack:///./modules/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$gl","$ext","$dom","$gldom","$uidom","$raf","$res","$tags","$comp","$loop","$event","$state","$owner","$child","$depth","$entity","$system","$transform","$name","for","$new","$del","$modify","$loader","UBIT","EBIT","SBIT","NBIT","temp","freeSet","Set","Loader","constructor","core","this","load","file","fetch","then","response","text","JSON","parse","obj","Promise","resolve","conf","res","Component","owner","enable","disable","hasEnable","hasDisable","hasNeedsUpdate","needsUpdate","Entity","Map","add","child","depth","addTag","tag","delTag","delete","hasTag","has","getComp","compClass","undefined","getCompOne","gvarRes","Mesh","super","iid","geometry","material","skeleton","x2","y2","z2","xy","xz","xw","yz","yw","zw","tm","Float32Array","Mat4","copy","mat","identity","perspective","fov","aspect","near","far","Math","tan","orbit","polar","azimuthal","dist","target","cosa","cos","sina","sin","cosp","sinp","x","y","z","mul","premul","fromTRS","pos","rot","scl","w","fromTRSC","Camera","pmat","wmat","length","tx","ty","tz","tw","Vec3","vec","set","normalize","sqrt","abs","min","max","mins","scale","maxs","sub","dot","addScaledVec","applyQuat","quat","mulNumber","num","Movement","speed","linear","direction","Rotation","axis","angle","ATrigger","next","inner","mask","offset","size","BTrigger","opos","upd","radius","STrigger","Animator","animation","loop","stop","time","tmp","Quat","fromAxisAngle","Transform","position","orientation","lmat","worldPosition","OrbitControl","distance","forward","nupd","afrozen","pfrozen","dfrozen","element","$k1","$in","$it1","$it2","DMap","start","ret","iterator","done","k1","k2","BATCH_SIZE","Batch","ibo","geo","vao","ext","createVertexArrayOES","gl","shader","bindVertexArrayOES","bindBuffer","ARRAY_BUFFER","vbo","attr","attribute","enableVertexAttribArray","vertexAttribPointer","type","stride","getAttribLocation","program","FLOAT","inst","vertexAttribDivisorANGLE","ELEMENT_ARRAY_BUFFER","ebo","Error","draw","camera","use","setUniform","drawElementsInstancedANGLE","TRIANGLES","UNSIGNED_SHORT","IBO_LENGTH","batch","screen","transform","input","towner","tvec","tvec2","STS","c1","c2","ATS","ATA","ATB","Branch","xl","yl","xh","yh","stp","maxStp","bs","es","ba","ea","Array","clear","adds","comp","adda","test","push","tests","testa","TREEPOSX","TREEPOSY","TREESIZE","TREESTEP","movement","tPos","moveSphere","barrier","it","random","moveStatic","moveTrain","createBonusBM","newEntity","newComp","createBonusSP","createBonusST","createSphere","createPillar1","createPillar2","createPillar3","createPillar4","createPillar5","createColumn1","createColumn2","createColumn3","createTunnel1","createTunnel2","createTrain","ent","zAxis","BARRIER_MAX","BONUS_TIME","SCOREDT","Vec2","Vec4","TLayer","texture","layer","tlayer","Shader","uniform","useProgram","uniformName","Number","uniform2f","uniform3f","uniform4f","uniform1i","uniformMatrix4fv","RawShaderLoader","vsh","createShader","VERTEX_SHADER","fsh","FRAGMENT_SHADER","createProgram","shaderSource","vs","compileShader","fs","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteShader","ACTIVE_UNIFORMS","getActiveUniform","includes","getUniformLocation","ACTIVE_ATTRIBUTES","getActiveAttrib","addRes","Material","depthtest","depthwrite","cullFace","blend","DEPTH_TEST","depthMask","CULL_FACE","BACK","FRONT","FRONT_AND_BACK","BLEND","MaterialLoader","getRes","ImageLoader","rv","rj","image","Image","substring","lastIndexOf","onload","onerror","src","Texture","tex","activeTexture","TEXTURE0","bindTexture","Texture2DLoader","TEXTURE_2D","createTexture","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_LINEAR","TEXTURE_WRAP_S","REPEAT","TEXTURE_WRAP_T","generateMipmap","Geometry","drawElements","disableVertexAttribArray","GeometryLoader","createBuffer","bufferData","STATIC_DRAW","Uint16Array","SceneLoader","loaders","loader","getLoader","robj","all","parseRes","entity","entt","tags","getCompClassByName","domId","document","getElementById","useEntity","delEntity","getContext","sd","getExtension","tf","tfa","e","performance","mark","fireEvent","requestAnimationFrame","measure","clearMarks","clearMeasures","cancelAnimationFrame","resType","loadRes","loaderName","regLoader","regSystem","system","getSystem","systemName","regEvent","event","systemArray","enableEntity","enableComp","getEntity","getEntitiesByName","result","CompClass","componentClass","delComp","modComp","useComp","getNewComp","getDelComp","getModComp","regComp","keys","dom","gldom","uidom","[object Object]","values","compMap","alpha","_time","now","_currentTime","_deltaTime","_timeScale","onStartFrame","deltaTime","timeScale","_up","Uint32Array","_down","_state","_pos","_dpos","_aup","_adown","_astate","_apos","_awheel","_pwheel","_dposflag","setAttribute","addEventListener","kUp","kDown","mUp","mDown","mMove","mWheel","tEnd","tStart","tMove","preventDefault","asyncDown","keyCode","floor","asyncUp","button","clientX","clientY","wheelDelta","changedTouches","keyUp","keyDown","keyState","mousePos","mouseDeltaPos","mouseWheel","VK_LBUTTON","VK_RBUTTON","VK_MBUTTON","VK_XBUTTON1","VK_XBUTTON2","VK_BACK","VK_TAB","VK_ESCAPE","VK_SPACE","VK_PAGEUP","VK_PAGEDOWN","VK_END","VK_HOME","VK_LEFT","VK_UP","VK_RIGHT","VK_DOWN","VK_0","VK_1","VK_2","VK_3","VK_4","VK_5","VK_6","VK_7","VK_8","VK_9","VK_A","VK_B","VK_C","VK_D","VK_E","VK_F","VK_G","VK_H","VK_I","VK_J","VK_K","VK_L","VK_M","VK_N","VK_O","VK_P","VK_Q","VK_R","VK_S","VK_T","VK_U","VK_V","VK_W","VK_X","VK_Y","VK_Z","VK_N0","VK_N1","VK_N2","VK_N3","VK_N4","VK_N5","VK_N6","VK_N7","VK_N8","VK_N9","VK_F1","VK_F2","VK_F3","VK_F4","VK_F5","VK_F6","VK_F7","VK_F8","VK_F9","VK_F10","VK_F11","VK_F12","VK_F13","VK_F14","VK_F15","VK_F16","VK_F17","VK_F18","VK_F19","VK_F20","VK_F21","VK_F22","VK_F23","VK_F24","curWidth","curHeight","newWidth","newHeight","onscreen","pr","window","devicePixelRatio","clientWidth","clientHeight","width","height","widthNPR","heightNPR","envMesh","batches","bid","ibuf","onStart","clearColor","STREAM_DRAW","onScreen","viewport","onRender","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","bufferSubData","onModify","setMainCamera","onUpdate","limearSpeed","count","onLateUpdate","onTransform","calcTransform","tree","onPHYUpdate","comp2","state","airplane","bonus","bm","sp","st","bmt","spt","stt","xspeed","zspeed","xmove","yPos","uiscr","uibg","uibm","uisp","uist","uiscore","uiresult","score","scoredt","console","log","g1","g2","g3","g4","createBarrier","setTimeout","innerHTML","style","display","innerText","concat","ceil","bns","move","updateBarrier","startMoveBarrier","Helper"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"D:\\\\$WEB\\\\prototype\\\\dist\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const $gl = Symbol('gl');\r\nconst $ext = Symbol('ext');\r\nconst $dom = Symbol('dom');\r\nconst $gldom = Symbol('gldom');\r\nconst $uidom = Symbol('uidom');\r\nconst $raf = Symbol('raf');\r\nconst $res = Symbol('res');\r\nconst $tags = Symbol('tags');\r\nconst $comp = Symbol('comp');\r\nconst $loop = Symbol('loop');\r\nconst $event = Symbol('event');\r\nconst $state = Symbol('state');\r\nconst $owner = Symbol('owner');\r\nconst $child = Symbol('child');\r\nconst $depth = Symbol('depth');\r\nconst $entity = Symbol('entity');\r\nconst $system = Symbol('system');\r\nconst $transform = Symbol('transform');\r\nconst $name = Symbol.for('name');\r\nconst $new = Symbol('new');\r\nconst $del = Symbol('del');\r\nconst $modify = Symbol('modify');\r\nconst $loader = Symbol('loader');\r\n\r\nconst UBIT = 1 << 31;\r\nconst EBIT = 1 << 30;\r\nconst SBIT = 1 << 29;\r\nconst NBIT = 1 << 28;\r\n\r\nlet temp = null;\r\nconst freeSet = new Set();\r\n\r\nexport class Loader {\r\n    constructor(core) {\r\n        this.core = core;\r\n    }\r\n    load(file) {\r\n        return fetch(file).then(response => response.text().then(text => JSON.parse(text)));\r\n    }\r\n    parse(obj) { return Promise.resolve(obj); }\r\n    conf(res) { return Promise.resolve(res); }\r\n}\r\n\r\nexport class Component {\r\n    constructor(owner, enable) {\r\n        this[$state] = UBIT;\r\n        this[$owner] = owner;\r\n        if (enable) this[$state] |= EBIT | SBIT;\r\n    }\r\n    get owner() { return this[$owner]; }\r\n    get enable() { return !!(this[$state] & EBIT); }\r\n    get disable() { return !(this[$state] & EBIT); }\r\n    get hasEnable() { return !!(this[$state] & ~EBIT) && !(this[$state] & ~SBIT); }\r\n    get hasDisable() { return !(this[$state] & ~EBIT) && !!(this[$state] & ~SBIT); }\r\n    get hasNeedsUpdate() { return !!(this[$state] & ~NBIT); }\r\n    set needsUpdate(value) {\r\n        if (value) this[$state] |= NBIT;\r\n        else this[$state] &= ~NBIT;\r\n    }\r\n}\r\n\r\nclass Entity {\r\n    constructor(owner, enable) {\r\n        this[$state] = UBIT;\r\n        this[$owner] = owner;\r\n        this[$name] = null;\r\n        this[$tags] = new Set();\r\n        this[$comp] = new Map(); // [CompClass, Set of component]\r\n        this[$child] = new Set();\r\n        this[$depth] = owner ? owner[$depth] + 1 : 0;\r\n        this[$transform] = null;\r\n        if (enable) this[$state] |= EBIT | SBIT;\r\n        if (owner !== null) owner[$child].add(this);\r\n    }\r\n    get owner() { return this[$owner]; }\r\n    get enable() { return !!(this[$state] & EBIT); }\r\n    get child() { return this[$child]; }\r\n    get depth() { return this[$depth]; }\r\n    get name() { return this[$name]; }\r\n    set name(value) { this[$name] = value; }\r\n    addTag(tag) { this[$tags].add(tag); }\r\n    delTag(tag) { this[$tags].delete(tag); }\r\n    hasTag(tag) { return this[$tags].has(tag); }\r\n    getComp(compClass) {\r\n        temp = this[$comp].get(compClass);\r\n        if (temp === undefined) temp = freeSet;\r\n        return temp;\r\n    }\r\n    getCompOne(compClass) {\r\n        temp = this[$comp].get(compClass);\r\n        if (temp !== undefined) [temp] = temp;\r\n        return temp !== undefined ? temp : null;\r\n    }\r\n}\r\n\r\nlet gvarRes = null;\r\nexport default class Core {\r\n    constructor(domId, conf) {\r\n        this[$dom] = document.getElementById(domId);\r\n        this[$gldom] = document.getElementById('app-gl');\r\n        this[$uidom] = document.getElementById('app-ui');\r\n        this[$comp] = new Map();\r\n        this[$entity] = {\r\n            useEntity: new Set(),\r\n            delEntity: new Set()\r\n        };\r\n        this[$loader] = new Map();\r\n        this[$system] = new Map();\r\n        this[$event] = new Map();\r\n        this[$res] = new Map();\r\n        this[$gl] = this[$gldom].getContext('webgl', conf);\r\n        if (this[$gl] === null) throw new Error('Get 3d context is failed');\r\n        this[$ext] = {\r\n            // tf: this[$gl].getExtension('OES_texture_float'),\r\n            sd: this[$gl].getExtension('OES_standard_derivatives'),\r\n            // tfa: this[$gl].getExtension('EXT_texture_filter_anisotropic'),\r\n            vao: this[$gl].getExtension('OES_vertex_array_object'),\r\n            inst: this[$gl].getExtension('ANGLE_instanced_arrays')\r\n        };\r\n        if (this[$ext].tf === null) throw new Error('Extension OES_texture_float not supported');\r\n        if (this[$ext].sd === null) throw new Error('Extension OES_standard_derivatives not supported');\r\n        if (this[$ext].tfa === null) throw new Error('Extension EXT_texture_filter_anisotropic not supported');\r\n        if (this[$ext].vao === null) throw new Error('Extension OES_vertex_array_object not supported');\r\n        if (this[$ext].inst === null) throw new Error('Extension ANGLE_instanced_arrays not supported');\r\n        for (const e in this[$ext].tfa) this[$gl][e] = this[$ext].tfa[e];\r\n\r\n        this[$state] = false;\r\n        this[$modify] = false;\r\n        this[$raf] = 0;\r\n        this[$loop] = () => {\r\n            performance.mark('frs');\r\n            this.fireEvent('onStartFrame');\r\n            this.fireEvent('onUpdate');\r\n            this.fireEvent('onTransform');\r\n            this.fireEvent('onPHYUpdate');\r\n            this.fireEvent('onLateUpdate');\r\n            this.fireEvent('onRender');\r\n            if (this[$modify]) {\r\n                this[$new]();\r\n                this.fireEvent('onModify');\r\n                this[$del]();\r\n                this[$modify] = false;\r\n            }\r\n            this[$raf] = requestAnimationFrame(this[$loop]);\r\n            performance.mark('fre');\r\n            performance.measure('frame', 'frs', 'fre');\r\n            performance.clearMarks();\r\n            performance.clearMeasures();\r\n        };\r\n    }\r\n    start() {\r\n        this[$raf] = requestAnimationFrame(this[$loop]);\r\n        this[$state] = true;\r\n        this.fireEvent('onStart');\r\n    }\r\n    stop() {\r\n        cancelAnimationFrame(this[$raf]);\r\n        this[$raf] = 0;\r\n        this[$state] = false;\r\n    }\r\n\r\n    addRes(type, name, res) {\r\n        if (!this[$res].has(type)) this[$res].set(type, {});\r\n        const resType = this[$res].get(type);\r\n        if (resType[name] !== undefined) throw new Error('Resource with this name already used');\r\n        resType[name] = res;\r\n    }\r\n    getRes(type, name) {\r\n        if (!this[$res].has(type)) throw new Error('Resource type not found');\r\n        gvarRes = this[$res].get(type)[name];\r\n        if (gvarRes === undefined) throw new Error('Resource not found');\r\n        return gvarRes;\r\n    }\r\n    loadRes(loaderName, file) {\r\n        if (!this[$loader].has(loaderName)) throw new Error('Loader not found');\r\n        const loader = this[$loader].get(loaderName);\r\n        return loader.load(file).then(obj => loader.parse(obj).then(res => loader.conf(res)));\r\n    }\r\n    parseRes(loaderName, obj) {\r\n        if (!this[$loader].has(loaderName)) throw new Error('Loader not found');\r\n        const loader = this[$loader].get(loaderName);\r\n        return loader.parse(obj).then(res => loader.conf(res));\r\n    }\r\n    regLoader(loader) {\r\n        if (loader[$name] === undefined) throw new Error('Loader not named');\r\n        if (this[$loader].has(loader)) throw new Error('Loader already used');\r\n        this[$loader].set(loader[$name], loader);\r\n    }\r\n    getLoader(loaderName) {\r\n        if (!this[$loader].has(loaderName)) throw new Error('Loader not found');\r\n        return this[$loader].get(loaderName);\r\n    }\r\n\r\n    regSystem(system) {\r\n        if (system[$name] === undefined) throw new Error('System not named');\r\n        if (this[$system].has(system[$name])) throw new Error('System already used');\r\n        this[$system].set(system[$name], system);\r\n    }\r\n    getSystem(systemName) {\r\n        return this[$system].get(systemName);\r\n    }\r\n    regEvent(event, system) {\r\n        if (!this[$event].has(event)) this[$event].set(event, []);\r\n        const systemArray = this[$event].get(event);\r\n        systemArray.push(system);\r\n    }\r\n    fireEvent(event) {\r\n        const systemArray = this[$event].get(event);\r\n        if (systemArray !== undefined) {\r\n            for (const system of systemArray) {\r\n                system[event](this);\r\n            }\r\n        }\r\n    }\r\n\r\n    newEntity(owner, enable) {\r\n        const entity = new Entity(owner, enable);\r\n        this[$entity].useEntity.add(entity);\r\n        this[$modify] = true;\r\n        return entity;\r\n    }\r\n    delEntity(entity) {\r\n        this[$entity].delEntity.add(entity);\r\n        this[$modify] = true;\r\n    }\r\n    enableEntity(entity, value) { // TODO!!!\r\n        if (value) entity[$state] |= SBIT;\r\n        else entity[$state] &= ~SBIT;\r\n        for (const comp of entity[$comp]) this.enableComp(comp, value);\r\n        for (const child of entity[$child]) this.enableEntity(child, value);\r\n    }\r\n    getEntity() { return this[$entity].useEntity; }\r\n    getEntitiesByName(name, result = []) {\r\n        result.length = 0;\r\n        for (const entity of this[$entity].useEntity) {\r\n            if (entity[$name] === name) result.push(entity);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    newComp(CompClass, owner, enable, conf) {\r\n        const componentClass = this[$comp].get(CompClass);\r\n        if (componentClass === undefined) throw new Error('Component class not registered');\r\n        const comp = new CompClass(owner, enable, conf);\r\n        componentClass.newComp.add(comp);\r\n        this[$modify] = true;\r\n        return comp;\r\n    }\r\n    delComp(comp) {\r\n        this[$comp].get(comp.constructor).delComp.add(comp);\r\n        this[$modify] = true;\r\n    }\r\n    enableComp(comp, value) { // TODO!!!\r\n        if (value) comp[$state] |= SBIT;\r\n        else comp[$state] &= ~SBIT;\r\n        this[$comp].get(comp.constructor).modComp.add(comp);\r\n        this[$modify] = true;\r\n    }\r\n    getComp(compClass) { return this[$comp].get(compClass).useComp; }\r\n    getNewComp(compClass) { return this[$comp].get(compClass).newComp; }\r\n    getDelComp(compClass) { return this[$comp].get(compClass).delComp; }\r\n    getModComp(compClass) { return this[$comp].get(compClass).modComp; }\r\n    regComp(compClass) {\r\n        if (compClass[$name] === undefined) throw new Error('Component class not named');\r\n        if (this[$comp].has(compClass)) throw new Error('Component class already used');\r\n        this[$comp].set(compClass, {\r\n            newComp: new Set(),\r\n            useComp: new Set(),\r\n            delComp: new Set(),\r\n            modComp: new Set()\r\n        });\r\n    }\r\n    getCompClassByName(name) {\r\n        for (const compClass of this[$comp].keys()) {\r\n            if (compClass[$name] === name) return compClass;\r\n        }\r\n        throw new Error('Component class not found');\r\n    }\r\n\r\n    get gl() { return this[$gl]; }\r\n    get ext() { return this[$ext]; }\r\n    get dom() { return this[$dom]; }\r\n    get gldom() { return this[$gldom]; }\r\n    get uidom() { return this[$uidom]; }\r\n\r\n    [$new]() {\r\n        // Copy components in use\r\n        for (const compClass of this[$comp].values()) {\r\n            for (const comp of compClass.newComp) {\r\n                compClass.useComp.add(comp);\r\n                if (!comp.owner[$comp].has(comp.constructor)) comp.owner[$comp].set(comp.constructor, new Set());\r\n                comp.owner[$comp].get(comp.constructor).add(comp);\r\n            }\r\n        }\r\n\r\n        // Reload delete array\r\n        for (const entity of this[$entity].delEntity) {\r\n            for (const compMap of entity[$comp].keys()) {\r\n                for (const comp of entity[$comp].get(compMap)) {\r\n                    this.delComp(comp);\r\n                }\r\n            }\r\n            for (const child of entity[$child]) this.delEntity(child);\r\n        }\r\n    }\r\n    [$del]() {\r\n        // Delete entities\r\n        for (const entity of this[$entity].delEntity) {\r\n            this[$entity].useEntity.delete(entity);\r\n        }\r\n        this[$entity].delEntity.clear();\r\n\r\n        // Delete components\r\n        for (const compClass of this[$comp].values()) {\r\n            // Mod\r\n            // TODO!!! Enabled entity\r\n            for (const comp of compClass.modComp) {\r\n                if (comp[$state] & comp[$owner][$state] & SBIT) comp[$state] |= EBIT;\r\n                else comp[$state] &= ~EBIT;\r\n                comp[$state] &= ~NBIT;\r\n            }\r\n            // Del\r\n            for (const comp of compClass.delComp) {\r\n                compClass.useComp.delete(comp);\r\n                comp[$owner][$comp].get(comp.constructor).delete(comp);\r\n            }\r\n            compClass.newComp.clear();\r\n            compClass.delComp.clear();\r\n            compClass.modComp.clear();\r\n        }\r\n    }\r\n}\r\n","import { Component } from '../Core/Core';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class Mesh extends Component {\r\n    constructor(owner, enable, conf) {\r\n        super(owner, enable);\r\n        this.iid = -1;\r\n        this.geometry = conf.geometry;\r\n        this.material = conf.material;\r\n        this.skeleton = conf.skeleton !== undefined ? conf.skeleton : null;\r\n    }\r\n}\r\nMesh[$name] = 'Mesh';\r\n","let x2 = 0;\r\nlet y2 = 0;\r\nlet z2 = 0;\r\nlet xy = 0;\r\nlet xz = 0;\r\nlet xw = 0;\r\nlet yz = 0;\r\nlet yw = 0;\r\nlet zw = 0;\r\nlet i = 0;\r\nconst tm = new Float32Array(16);\r\n\r\nexport default class Mat4 extends Float32Array {\r\n    constructor() {\r\n        super(16);\r\n        this[0] = 1;\r\n        this[5] = 1;\r\n        this[10] = 1;\r\n        this[15] = 1;\r\n    }\r\n\r\n    copy(mat) {\r\n        for (i = 0; i < 16; i++) this[i] = mat[i];\r\n        return this;\r\n    }\r\n\r\n    identity() {\r\n        for (i = 0; i < 16; i++) this[i] = (i % 5 === 0) ? 1 : 0;\r\n        return this;\r\n    }\r\n\r\n    perspective(fov, aspect, near, far) {\r\n        this.identity();\r\n        this[15] = 0;\r\n        this[14] = -2 * far * near / (far - near);\r\n        this[11] = 1;\r\n        this[10] = (far + near) / (far - near);\r\n        this[5] = 1 / Math.tan(fov * 0.5);\r\n        this[0] = this[5] / aspect;\r\n        return this;\r\n    }\r\n\r\n    orbit(polar, azimuthal, dist, target) {\r\n        const cosa = Math.cos(azimuthal);\r\n        const sina = Math.sin(azimuthal);\r\n        const cosp = Math.cos(polar);\r\n        const sinp = Math.sin(polar);\r\n        this.identity();\r\n\r\n        this[0] = cosa;\r\n        this[4] = 0;\r\n        this[8] = sina;\r\n        this[1] = sina * sinp;\r\n        this[5] = cosp;\r\n        this[9] = -cosa * sinp;\r\n        this[2] = -sina * cosp;\r\n        this[6] = sinp;\r\n        this[10] = cosa * cosp;\r\n\r\n        this[12] = dist * (this[2] * this[0] + this[6] * this[4] + this[10] * this[8]);\r\n        this[13] = dist * (this[2] * this[1] + this[6] * this[5] + this[10] * this[9]);\r\n        this[14] = dist * (this[2] * this[2] + this[6] * this[6] + this[10] * this[10]);\r\n\r\n        this[12] -= target.x * this[0] + target.y * this[4] + target.z * this[8];\r\n        this[13] -= target.x * this[1] + target.y * this[5] + target.z * this[9];\r\n        this[14] -= target.x * this[2] + target.y * this[6] + target.z * this[10];\r\n        return this;\r\n    }\r\n\r\n    mul(mat) {\r\n        tm[0] = this[0] * mat[0] + this[1] * mat[4] + this[2] * mat[8] + this[3] * mat[12];\r\n        tm[1] = this[0] * mat[1] + this[1] * mat[5] + this[2] * mat[9] + this[3] * mat[13];\r\n        tm[2] = this[0] * mat[2] + this[1] * mat[6] + this[2] * mat[10] + this[3] * mat[14];\r\n        tm[3] = this[0] * mat[3] + this[1] * mat[7] + this[2] * mat[11] + this[3] * mat[15];\r\n        tm[4] = this[4] * mat[0] + this[5] * mat[4] + this[6] * mat[8] + this[7] * mat[12];\r\n        tm[5] = this[4] * mat[1] + this[5] * mat[5] + this[6] * mat[9] + this[7] * mat[13];\r\n        tm[6] = this[4] * mat[2] + this[5] * mat[6] + this[6] * mat[10] + this[7] * mat[14];\r\n        tm[7] = this[4] * mat[3] + this[5] * mat[7] + this[6] * mat[11] + this[7] * mat[15];\r\n        tm[8] = this[8] * mat[0] + this[9] * mat[4] + this[10] * mat[8] + this[11] * mat[12];\r\n        tm[9] = this[8] * mat[1] + this[9] * mat[5] + this[10] * mat[9] + this[11] * mat[13];\r\n        tm[10] = this[8] * mat[2] + this[9] * mat[6] + this[10] * mat[10] + this[11] * mat[14];\r\n        tm[11] = this[8] * mat[3] + this[9] * mat[7] + this[10] * mat[11] + this[11] * mat[15];\r\n        tm[12] = this[12] * mat[0] + this[13] * mat[4] + this[14] * mat[8] + this[15] * mat[12];\r\n        tm[13] = this[12] * mat[1] + this[13] * mat[5] + this[14] * mat[9] + this[15] * mat[13];\r\n        tm[14] = this[12] * mat[2] + this[13] * mat[6] + this[14] * mat[10] + this[15] * mat[14];\r\n        tm[15] = this[12] * mat[3] + this[13] * mat[7] + this[14] * mat[11] + this[15] * mat[15];\r\n        for (i = 0; i < 16; i++) this[i] = tm[i];\r\n        return this;\r\n    }\r\n\r\n    premul(mat) {\r\n        tm[0] = mat[0] * this[0] + mat[1] * this[4] + mat[2] * this[8] + mat[3] * this[12];\r\n        tm[1] = mat[0] * this[1] + mat[1] * this[5] + mat[2] * this[9] + mat[3] * this[13];\r\n        tm[2] = mat[0] * this[2] + mat[1] * this[6] + mat[2] * this[10] + mat[3] * this[14];\r\n        tm[3] = mat[0] * this[3] + mat[1] * this[7] + mat[2] * this[11] + mat[3] * this[15];\r\n        tm[4] = mat[4] * this[0] + mat[5] * this[4] + mat[6] * this[8] + mat[7] * this[12];\r\n        tm[5] = mat[4] * this[1] + mat[5] * this[5] + mat[6] * this[9] + mat[7] * this[13];\r\n        tm[6] = mat[4] * this[2] + mat[5] * this[6] + mat[6] * this[10] + mat[7] * this[14];\r\n        tm[7] = mat[4] * this[3] + mat[5] * this[7] + mat[6] * this[11] + mat[7] * this[15];\r\n        tm[8] = mat[8] * this[0] + mat[9] * this[4] + mat[10] * this[8] + mat[11] * this[12];\r\n        tm[9] = mat[8] * this[1] + mat[9] * this[5] + mat[10] * this[9] + mat[11] * this[13];\r\n        tm[10] = mat[8] * this[2] + mat[9] * this[6] + mat[10] * this[10] + mat[11] * this[14];\r\n        tm[11] = mat[8] * this[3] + mat[9] * this[7] + mat[10] * this[11] + mat[11] * this[15];\r\n        tm[12] = mat[12] * this[0] + mat[13] * this[4] + mat[14] * this[8] + mat[15] * this[12];\r\n        tm[13] = mat[12] * this[1] + mat[13] * this[5] + mat[14] * this[9] + mat[15] * this[13];\r\n        tm[14] = mat[12] * this[2] + mat[13] * this[6] + mat[14] * this[10] + mat[15] * this[14];\r\n        tm[15] = mat[12] * this[3] + mat[13] * this[7] + mat[14] * this[11] + mat[15] * this[15];\r\n        for (i = 0; i < 16; i++) this[i] = tm[i];\r\n        return this;\r\n    }\r\n\r\n    fromTRS(pos, rot, scl) {\r\n        this[3] = 0;\r\n        this[7] = 0;\r\n        this[11] = 0;\r\n        this[15] = 1;\r\n\r\n        x2 = 2 * rot.x * rot.x;\r\n        y2 = 2 * rot.y * rot.y;\r\n        z2 = 2 * rot.z * rot.z;\r\n        xy = 2 * rot.x * rot.y;\r\n        xz = 2 * rot.x * rot.z;\r\n        xw = 2 * rot.x * rot.w;\r\n        yz = 2 * rot.y * rot.z;\r\n        yw = 2 * rot.y * rot.w;\r\n        zw = 2 * rot.z * rot.w;\r\n\r\n        this[0] = scl.x * (1 - y2 - z2);\r\n        this[1] = scl.x * (xy + zw);\r\n        this[2] = scl.x * (xz - yw);\r\n        this[4] = scl.y * (xy - zw);\r\n        this[5] = scl.y * (1 - x2 - z2);\r\n        this[6] = scl.y * (yz + xw);\r\n        this[8] = scl.z * (xz + yw);\r\n        this[9] = scl.z * (yz - xw);\r\n        this[10] = scl.z * (1 - x2 - y2);\r\n\r\n        this[12] = pos.x;\r\n        this[13] = pos.y;\r\n        this[14] = pos.z;\r\n        return this;\r\n    }\r\n\r\n    fromTRSC(pos, rot, scl) {\r\n        this[3] = 0;\r\n        this[7] = 0;\r\n        this[11] = 0;\r\n        this[15] = 1;\r\n\r\n        x2 = 2 * rot.x * rot.x;\r\n        y2 = 2 * rot.y * rot.y;\r\n        z2 = 2 * rot.z * rot.z;\r\n        xy = 2 * (-rot.x) * (-rot.y);\r\n        xz = 2 * (-rot.x) * (-rot.z);\r\n        xw = 2 * (-rot.x) * (-rot.w);\r\n        yz = 2 * (-rot.y) * (-rot.z);\r\n        yw = 2 * (-rot.y) * (-rot.w);\r\n        zw = 2 * (-rot.z) * (-rot.w);\r\n\r\n        this[0] = (1 - y2 - z2) / scl.x;\r\n        this[1] = (xy + zw) / scl.x;\r\n        this[2] = (xz - yw) / scl.x;\r\n        this[4] = (xy - zw) / scl.y;\r\n        this[5] = (1 - x2 - z2) / scl.y;\r\n        this[6] = (yz + xw) / scl.y;\r\n        this[8] = (xz + yw) / scl.z;\r\n        this[9] = (yz - xw) / scl.z;\r\n        this[10] = (1 - x2 - y2) / scl.z;\r\n\r\n        // this[12] = -pos.x;\r\n        // this[13] = -pos.y;\r\n        // this[14] = -pos.z;\r\n        this[12] = -pos.x * this[0] - pos.y * this[4] - pos.z * this[8];\r\n        this[13] = -pos.x * this[1] - pos.y * this[5] - pos.z * this[9];\r\n        this[14] = -pos.x * this[2] - pos.y * this[6] - pos.z * this[10];\r\n        return this;\r\n    }\r\n}\r\n","import { Component } from '../Core/Core';\r\nimport Mat4 from '../Math/Mat4';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class Camera extends Component {\r\n    constructor(owner, enable, conf) {\r\n        super(owner, enable);\r\n        this.aspect = conf.aspect || 1;\r\n        this.fov = conf.fov || 0.7;\r\n        this.near = conf.near || 1;\r\n        this.far = conf.far || 1000;\r\n        this.pmat = new Mat4();\r\n        this.wmat = new Mat4();\r\n    }\r\n}\r\nCamera[$name] = 'Camera';\r\n","let length = 0;\r\nlet tx = 0;\r\nlet ty = 0;\r\nlet tz = 0;\r\nlet tw = 0;\r\nexport default class Vec3 {\r\n    constructor(x = 0, y = 0, z = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n\r\n    copy(vec) {\r\n        this.x = vec.x;\r\n        this.y = vec.y;\r\n        this.z = vec.z;\r\n        return this;\r\n    }\r\n\r\n    set(x, y, z) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        return this;\r\n    }\r\n\r\n    normalize() {\r\n        length = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n        this.x /= length;\r\n        this.y /= length;\r\n        this.z /= length;\r\n        return this;\r\n    }\r\n\r\n    abs() {\r\n        this.x = Math.abs(this.x);\r\n        this.y = Math.abs(this.y);\r\n        this.z = Math.abs(this.z);\r\n        return this;\r\n    }\r\n\r\n    min(vec) {\r\n        this.x = Math.min(this.x, vec.x);\r\n        this.y = Math.min(this.y, vec.y);\r\n        this.z = Math.min(this.z, vec.z);\r\n        return this;\r\n    }\r\n\r\n    max(vec) {\r\n        this.x = Math.max(this.x, vec.x);\r\n        this.y = Math.max(this.y, vec.y);\r\n        this.z = Math.max(this.z, vec.z);\r\n        return this;\r\n    }\r\n\r\n    mins(scale) {\r\n        this.x = Math.min(this.x, scale);\r\n        this.y = Math.min(this.y, scale);\r\n        this.z = Math.min(this.z, scale);\r\n        return this;\r\n    }\r\n\r\n    maxs(scale) {\r\n        this.x = Math.max(this.x, scale);\r\n        this.y = Math.max(this.y, scale);\r\n        this.z = Math.max(this.z, scale);\r\n        return this;\r\n    }\r\n\r\n    add(vec) {\r\n        this.x += vec.x;\r\n        this.y += vec.y;\r\n        this.z += vec.z;\r\n        return this;\r\n    }\r\n\r\n    sub(vec) {\r\n        this.x -= vec.x;\r\n        this.y -= vec.y;\r\n        this.z -= vec.z;\r\n        return this;\r\n    }\r\n\r\n    dot(vec) {\r\n        return this.x * vec.x + this.y * vec.y + this.z * vec.z;\r\n    }\r\n\r\n    addScaledVec(vec, scale) {\r\n        this.x += vec.x * scale;\r\n        this.y += vec.y * scale;\r\n        this.z += vec.z * scale;\r\n        return this;\r\n    }\r\n\r\n    applyQuat(quat) {\r\n        tx = quat.w * this.x + quat.y * this.z - quat.z * this.y;\r\n        ty = quat.w * this.y + quat.z * this.x - quat.x * this.z;\r\n        tz = quat.w * this.z + quat.x * this.y - quat.y * this.x;\r\n        tw = -quat.x * this.x - quat.y * this.y - quat.z * this.z;\r\n        this.x = tx * quat.w - tw * quat.x - ty * quat.z + tz * quat.y;\r\n        this.y = ty * quat.w - tw * quat.y - tz * quat.x + tx * quat.z;\r\n        this.z = tz * quat.w - tw * quat.z - tx * quat.y + ty * quat.x;\r\n        return this;\r\n    }\r\n\r\n    mulNumber(num) {\r\n        this.x *= num;\r\n        this.y *= num;\r\n        this.z *= num;\r\n        return this;\r\n    }\r\n\r\n    get length() {\r\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n    }\r\n}\r\n","import { Component } from '../Core/Core';\r\nimport Vec3 from '../Math/Vec3';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class Movement extends Component {\r\n    constructor(owner, enable, conf) {\r\n        super(owner, enable);\r\n        this.speed = conf.speed !== undefined ? conf.speed : 0;\r\n        this.linear = conf.linear !== undefined ? conf.linear : true;\r\n        this.direction = new Vec3(0, 0, -1);\r\n        if (conf.direction !== undefined) this.direction.copy(conf.direction);\r\n    }\r\n}\r\nMovement[$name] = 'Movement';\r\n","import { Component } from '../Core/Core';\r\nimport Vec3 from '../Math/Vec3';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class Rotation extends Component {\r\n    constructor(owner, enable, conf) {\r\n        super(owner, enable);\r\n        this.axis = new Vec3();\r\n        this.angle = conf.angle || 0;\r\n        if (conf.axis) this.axis.copy(conf.axis);\r\n    }\r\n}\r\nRotation[$name] = 'Rotation';\r\n","import { Component } from '../Core/Core';\r\nimport Vec3 from '../Math/Vec3';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class ATrigger extends Component {\r\n    constructor(owner, enable, conf) {\r\n        super(owner, enable);\r\n        this.pos = new Vec3();\r\n        this.next = null;\r\n        this.inner = [];\r\n        this.mask = conf.mask !== undefined ? conf.mask : 0xFFFFFFFF;\r\n        this.offset = new Vec3();\r\n        if (conf.offset !== undefined) this.offset.copy(conf.offset);\r\n        this.size = new Vec3();\r\n        if (conf.size !== undefined) this.size.copy(conf.size);\r\n    }\r\n}\r\nATrigger[$name] = 'ATrigger';\r\n","import { Component } from '../Core/Core';\r\nimport Vec3 from '../Math/Vec3';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class BTrigger extends Component {\r\n    constructor(owner, enable, conf) {\r\n        super(owner, enable);\r\n        this.pos = new Vec3();\r\n        this.opos = new Vec3();\r\n        this.upd = true;\r\n        this.length = 0;\r\n        this.next = null;\r\n        this.inner = [];\r\n        this.mask = conf.mask !== undefined ? conf.mask : 0xFFFFFFFF;\r\n        this.offset = new Vec3();\r\n        if (conf.offset !== undefined) this.offset.copy(conf.offset);\r\n        this.radius = conf.radius !== undefined ? conf.radius : 0;\r\n    }\r\n}\r\nBTrigger[$name] = 'BTrigger';\r\n","import { Component } from '../Core/Core';\r\nimport Vec3 from '../Math/Vec3';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class STrigger extends Component {\r\n    constructor(owner, enable, conf) {\r\n        super(owner, enable);\r\n        this.pos = new Vec3();\r\n        this.next = null;\r\n        this.inner = [];\r\n        this.mask = conf.mask !== undefined ? conf.mask : 0xFFFFFFFF;\r\n        this.offset = new Vec3();\r\n        if (conf.offset !== undefined) this.offset.copy(conf.offset);\r\n        this.radius = conf.radius !== undefined ? conf.radius : 0;\r\n    }\r\n}\r\nSTrigger[$name] = 'STrigger';\r\n","import { Component } from '../Core/Core';\r\nimport Vec3 from '../Math/Vec3';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class Animator extends Component {\r\n    constructor(owner, enable, conf) {\r\n        super(owner, enable);\r\n        this.skeleton = conf.skeleton !== undefined ? conf.skeleton : null;\r\n        this.animation = conf.animation !== undefined ? conf.animation : null;\r\n        this.loop = true;\r\n        this.stop = false;\r\n        this.time = 0;\r\n        this.key = new Vec3(); // LayerKey, StartKey, DeltaKey\r\n    }\r\n}\r\nAnimator[$name] = 'Animator';\r\n","let tmp = null;\r\n\r\nexport default class Quat {\r\n    constructor(x = 0, y = 0, z = 0, w = 1) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n    }\r\n\r\n    copy(quat) {\r\n        this.x = quat.x;\r\n        this.y = quat.y;\r\n        this.z = quat.z;\r\n        this.w = quat.w;\r\n        return this;\r\n    }\r\n\r\n    set(x, y, z, w) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n        return this;\r\n    }\r\n\r\n    mul(quat) {\r\n        const x = this.x;\r\n        const y = this.y;\r\n        const z = this.z;\r\n        const w = this.w;\r\n        this.x = w * quat.x + x * quat.w + y * quat.z - z * quat.y;\r\n        this.y = w * quat.y - x * quat.z + y * quat.w + z * quat.x;\r\n        this.z = w * quat.z + x * quat.y - y * quat.x + z * quat.w;\r\n        this.w = w * quat.w - x * quat.x - y * quat.y - z * quat.z;\r\n        return this;\r\n    }\r\n\r\n    premul(quat) {\r\n        const x = this.x;\r\n        const y = this.y;\r\n        const z = this.z;\r\n        const w = this.w;\r\n        this.x = quat.w * x + quat.x * w + quat.y * z - quat.z * y;\r\n        this.y = quat.w * y - quat.x * z + quat.y * w + quat.z * x;\r\n        this.z = quat.w * z + quat.x * y - quat.y * x + quat.z * w;\r\n        this.w = quat.w * w - quat.x * x - quat.y * y - quat.z * z;\r\n        return this;\r\n    }\r\n\r\n    fromAxisAngle(axis, angle) {\r\n        tmp = Math.sin(angle * 0.5);\r\n        this.x = axis.x * tmp;\r\n        this.y = axis.y * tmp;\r\n        this.z = axis.z * tmp;\r\n        this.w = Math.cos(angle * 0.5);\r\n        return this;\r\n    }\r\n}\r\n","import { Component } from '../Core/Core';\r\nimport Vec3 from '../Math/Vec3';\r\nimport Quat from '../Math/Quat';\r\nimport Mat4 from '../Math/Mat4';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class Transform extends Component {\r\n    constructor(owner, enable, conf) {\r\n        super(owner, enable);\r\n        this.position = new Vec3();\r\n        this.orientation = new Quat();\r\n        this.scale = new Vec3(1, 1, 1);\r\n        if (conf.scale) this.scale.copy(conf.scale);\r\n        if (conf.position) this.position.copy(conf.position);\r\n        if (conf.orientation) this.orientation.copy(conf.orientation);\r\n\r\n        this.lmat = new Mat4();\r\n        this.wmat = new Mat4();\r\n    }\r\n\r\n    worldPosition(res) {\r\n        res.x = this.wmat[12];\r\n        res.y = this.wmat[13];\r\n        res.z = this.wmat[14];\r\n        return res;\r\n    }\r\n}\r\nTransform[$name] = 'Transform';\r\n","import { Component } from '../Core/Core';\r\nimport Vec3 from '../Math/Vec3';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class OrbitControl extends Component {\r\n    constructor(owner, enable, conf) {\r\n        super(owner, enable);\r\n        this.polar = conf.polar || 0;\r\n        this.azimuthal = conf.azimuthal || 0;\r\n        this.distance = conf.distance || 0;\r\n        this.forward = new Vec3();\r\n        this.speed = conf.speed || 0.004;\r\n        this.nupd = true;\r\n        this.afrozen = conf.afrozen || false;\r\n        this.pfrozen = conf.pfrozen || false;\r\n        this.dfrozen = conf.dfrozen || false;\r\n    }\r\n}\r\nOrbitControl[$name] = 'OrbitControl';\r\n","const $name = Symbol.for('name');\r\n\r\nexport default class TimeSystem {\r\n    constructor(core) {\r\n        this[$name] = 'Time';\r\n        core.regEvent('onStartFrame', this);\r\n        this._time = performance.now();\r\n        this._currentTime = 0;\r\n        this._deltaTime = 0;\r\n        this._timeScale = 1;\r\n    }\r\n\r\n    onStartFrame() {\r\n        this._deltaTime = Math.max((performance.now() - this._time), 0.00001) * this._timeScale * 0.001;\r\n        this._time = performance.now();\r\n        this._currentTime += this._deltaTime;\r\n    }\r\n\r\n    get time() { return this._currentTime; }\r\n    get deltaTime() { return this._deltaTime; }\r\n    get timeScale() { return this._timeScale; }\r\n    set timeScale(scale) { this._timeScale = scale; }\r\n}\r\n","const $name = Symbol.for('name');\r\n\r\nlet mask = null;\r\nlet element = null;\r\nexport default class InputSystem {\r\n    constructor(core) {\r\n        this[$name] = 'Input';\r\n        core.regEvent('onStartFrame', this);\r\n\r\n        this._up = new Uint32Array(8);\r\n        this._down = new Uint32Array(8);\r\n        this._state = new Uint32Array(8);\r\n        this._pos = { x: 0, y: 0 };\r\n        this._dpos = { x: 0, y: 0 };\r\n        this._aup = new Uint32Array(8);\r\n        this._adown = new Uint32Array(8);\r\n        this._astate = new Uint32Array(8);\r\n        this._apos = { x: 0, y: 0 };\r\n        this._awheel = 0;\r\n        this._pwheel = 0;\r\n        this._dposflag = true;\r\n\r\n        const dom = core.dom;\r\n        dom.setAttribute('tabindex', 1);\r\n        dom.addEventListener('keyup', (e) => { this.kUp(e); });\r\n        dom.addEventListener('keydown', (e) => { this.kDown(e); });\r\n        dom.addEventListener('mouseup', (e) => { this.mUp(e); });\r\n        dom.addEventListener('mousedown', (e) => { this.mDown(e); });\r\n        dom.addEventListener('mousemove', (e) => { this.mMove(e); });\r\n        dom.addEventListener('mousewheel', (e) => { this.mWheel(e); });\r\n        dom.addEventListener('touchend', (e) => { this.tEnd(e); });\r\n        dom.addEventListener('touchstart', (e) => { this.tStart(e); });\r\n        dom.addEventListener('touchmove', (e) => { this.tMove(e); });\r\n        dom.addEventListener('contextmenu', (e) => { e.preventDefault(); });\r\n    }\r\n\r\n    onStartFrame() {\r\n        for (let i = 0; i < 8; i++) {\r\n            this._up[i] = this._aup[i];\r\n            this._down[i] = this._adown[i];\r\n            this._state[i] = this._astate[i];\r\n            this._aup[i] = 0;\r\n            this._adown[i] = 0;\r\n        }\r\n        this._dpos.x = this._dposflag ? this._apos.x - this._pos.x : 0;\r\n        this._dpos.y = this._dposflag ? this._apos.y - this._pos.y : 0;\r\n        this._pos.x = this._apos.x;\r\n        this._pos.y = this._apos.y;\r\n        this._pwheel = this._awheel;\r\n        this._awheel = 0;\r\n        this._dposflag = true;\r\n    }\r\n\r\n    asyncDown(keyCode) {\r\n        mask = 1 << (keyCode % 32);\r\n        element = Math.floor(keyCode / 32);\r\n        this._adown[element] |= mask & ~this._astate[element];\r\n        this._astate[element] |= mask;\r\n    }\r\n    asyncUp(keyCode) {\r\n        mask = 1 << (keyCode % 32);\r\n        element = Math.floor(keyCode / 32);\r\n        this._aup[element] |= mask;\r\n        this._astate[element] &= ~mask;\r\n    }\r\n\r\n    kUp(e) {\r\n        this.asyncUp(e.keyCode);\r\n    }\r\n    kDown(e) {\r\n        this.asyncDown(e.keyCode);\r\n        if (e.keyCode !== 116) e.preventDefault();\r\n    }\r\n    mUp(e) {\r\n        switch (e.button) {\r\n            case 0: e.keyCode = 1; break;\r\n            case 1: e.keyCode = 4; break;\r\n            case 2: e.keyCode = 2; break;\r\n            default: e.keyCode = 0; break;\r\n        }\r\n        this.asyncUp(e.keyCode);\r\n    }\r\n    mDown(e) {\r\n        switch (e.button) {\r\n            case 0: e.keyCode = 1; break;\r\n            case 1: e.keyCode = 4; break;\r\n            case 2: e.keyCode = 2; break;\r\n            default: e.keyCode = 0; break;\r\n        }\r\n        this.asyncDown(e.keyCode);\r\n    }\r\n    mMove(e) {\r\n        this._apos.x = e.clientX;\r\n        this._apos.y = e.clientY;\r\n    }\r\n    mWheel(e) {\r\n        this._awheel += e.wheelDelta / 120;\r\n    }\r\n    tStart(e) {\r\n        this._apos.x = e.changedTouches[0].clientX;\r\n        this._apos.y = e.changedTouches[0].clientY;\r\n        this.asyncDown(1);\r\n        this._dposflag = false;\r\n        e.preventDefault();\r\n    }\r\n    tEnd(e) {\r\n        this._apos.x = e.changedTouches[0].clientX;\r\n        this._apos.y = e.changedTouches[0].clientY;\r\n        this.asyncUp(1);\r\n    }\r\n    tMove(e) {\r\n        this._apos.x = e.changedTouches[0].clientX;\r\n        this._apos.y = e.changedTouches[0].clientY;\r\n    }\r\n\r\n    keyUp(key) {\r\n        return (this._up[Math.floor(key / 32)] >> (key % 32)) & 0x1;\r\n    }\r\n    keyDown(key) {\r\n        return (this._down[Math.floor(key / 32)] >> (key % 32)) & 0x1;\r\n    }\r\n    keyState(key) {\r\n        return (this._state[Math.floor(key / 32)] >> (key % 32)) & 0x1;\r\n    }\r\n    mousePos() {\r\n        return this._pos;\r\n    }\r\n    mouseDeltaPos() {\r\n        return this._dpos;\r\n    }\r\n    mouseWheel() {\r\n        return this._pwheel;\r\n    }\r\n\r\n    get VK_LBUTTON() { return 1; }\r\n    get VK_RBUTTON() { return 2; }\r\n    get VK_MBUTTON() { return 4; }\r\n    get VK_XBUTTON1() { return 5; }\r\n    get VK_XBUTTON2() { return 6; }\r\n\r\n    get VK_BACK() { return 8; }\r\n    get VK_TAB() { return 9; }\r\n\r\n    get VK_ESCAPE() { return 27; }\r\n\r\n    get VK_SPACE() { return 32; }\r\n    get VK_PAGEUP() { return 33; }\r\n    get VK_PAGEDOWN() { return 34; }\r\n    get VK_END() { return 35; }\r\n    get VK_HOME() { return 36; }\r\n    get VK_LEFT() { return 37; }\r\n    get VK_UP() { return 38; }\r\n    get VK_RIGHT() { return 39; }\r\n    get VK_DOWN() { return 40; }\r\n\r\n    get VK_0() { return 48; }\r\n    get VK_1() { return 49; }\r\n    get VK_2() { return 50; }\r\n    get VK_3() { return 51; }\r\n    get VK_4() { return 52; }\r\n    get VK_5() { return 53; }\r\n    get VK_6() { return 54; }\r\n    get VK_7() { return 55; }\r\n    get VK_8() { return 56; }\r\n    get VK_9() { return 57; }\r\n\r\n    get VK_A() { return 65; }\r\n    get VK_B() { return 66; }\r\n    get VK_C() { return 67; }\r\n    get VK_D() { return 68; }\r\n    get VK_E() { return 69; }\r\n    get VK_F() { return 70; }\r\n    get VK_G() { return 71; }\r\n    get VK_H() { return 72; }\r\n    get VK_I() { return 73; }\r\n    get VK_J() { return 74; }\r\n    get VK_K() { return 75; }\r\n    get VK_L() { return 76; }\r\n    get VK_M() { return 77; }\r\n    get VK_N() { return 78; }\r\n    get VK_O() { return 79; }\r\n    get VK_P() { return 80; }\r\n    get VK_Q() { return 81; }\r\n    get VK_R() { return 82; }\r\n    get VK_S() { return 83; }\r\n    get VK_T() { return 84; }\r\n    get VK_U() { return 85; }\r\n    get VK_V() { return 86; }\r\n    get VK_W() { return 87; }\r\n    get VK_X() { return 88; }\r\n    get VK_Y() { return 89; }\r\n    get VK_Z() { return 90; }\r\n\r\n    get VK_N0() { return 96; }\r\n    get VK_N1() { return 97; }\r\n    get VK_N2() { return 98; }\r\n    get VK_N3() { return 99; }\r\n    get VK_N4() { return 100; }\r\n    get VK_N5() { return 101; }\r\n    get VK_N6() { return 102; }\r\n    get VK_N7() { return 103; }\r\n    get VK_N8() { return 104; }\r\n    get VK_N9() { return 105; }\r\n\r\n    get VK_F1() { return 112; }\r\n    get VK_F2() { return 113; }\r\n    get VK_F3() { return 114; }\r\n    get VK_F4() { return 115; }\r\n    get VK_F5() { return 116; }\r\n    get VK_F6() { return 117; }\r\n    get VK_F7() { return 118; }\r\n    get VK_F8() { return 119; }\r\n    get VK_F9() { return 120; }\r\n    get VK_F10() { return 121; }\r\n    get VK_F11() { return 122; }\r\n    get VK_F12() { return 123; }\r\n    get VK_F13() { return 124; }\r\n    get VK_F14() { return 125; }\r\n    get VK_F15() { return 126; }\r\n    get VK_F16() { return 127; }\r\n    get VK_F17() { return 128; }\r\n    get VK_F18() { return 129; }\r\n    get VK_F19() { return 130; }\r\n    get VK_F20() { return 131; }\r\n    get VK_F21() { return 132; }\r\n    get VK_F22() { return 133; }\r\n    get VK_F23() { return 134; }\r\n    get VK_F24() { return 135; }\r\n}\r\n","const $name = Symbol.for('name');\r\n\r\nexport default class ScreenSystem {\r\n    constructor(core) {\r\n        this[$name] = 'Screen';\r\n        core.regEvent('onStartFrame', this);\r\n        this.curWidth = 1;\r\n        this.curHeight = 1;\r\n        this.newWidth = 1;\r\n        this.newHeight = 1;\r\n        this.onscreen = false;\r\n        this.pr = window.devicePixelRatio || 1;\r\n    }\r\n\r\n    onStartFrame(core) {\r\n        performance.mark('screens');\r\n        this.newWidth = core.dom.clientWidth * this.pr;\r\n        this.newHeight = core.dom.clientHeight * this.pr;\r\n        this.onscreen = false;\r\n        if (this.curWidth !== this.newWidth) { this.curWidth = this.newWidth; this.onscreen = true; }\r\n        if (this.curHeight !== this.newHeight) { this.curHeight = this.newHeight; this.onscreen = true; }\r\n        if (this.onscreen) core.fireEvent('onScreen');\r\n        performance.mark('screene');\r\n        performance.measure('screen', 'screens', 'screene');\r\n    }\r\n\r\n    get width() { return this.curWidth; }\r\n    get height() { return this.curHeight; }\r\n    get widthNPR() { return this.curWidth / this.pr; }\r\n    get heightNPR() { return this.curHeight / this.pr; }\r\n}\r\n","const $k1 = Symbol('k1');\r\nconst $in = Symbol('in');\r\nconst $it1 = Symbol('it1');\r\nconst $it2 = Symbol('it2');\r\n\r\nlet temp = null;\r\nexport default class DMap {\r\n    constructor() {\r\n        this[$in] = new Map();\r\n        this[$it1] = null;\r\n        this[$it2] = null;\r\n    }\r\n\r\n    start() {\r\n        this[$it1] = null;\r\n        this[$it2] = null;\r\n    }\r\n\r\n    next(ret) {\r\n        if (!this[$it1]) this[$it1] = this[$in][Symbol.iterator]();\r\n\r\n        while (true) {\r\n            if (!this[$it2]) {\r\n                temp = this[$it1].next();\r\n                if (temp.done) {\r\n                    this[$it1] = null;\r\n                    this[$it2] = null;\r\n                    return null;\r\n                }\r\n                this[$k1] = temp.value[0];\r\n                this[$it2] = temp.value[1][Symbol.iterator]();\r\n            }\r\n\r\n            temp = this[$it2].next();\r\n            if (!temp.done) {\r\n                ret.k1 = this[$k1];\r\n                ret.k2 = temp.value[0];\r\n                ret.value = temp.value[1];\r\n                return ret;\r\n            }\r\n            this[$it2] = null;\r\n        }\r\n    }\r\n\r\n    set(k1, k2, value) {\r\n        if (this[$in].has(k1)) {\r\n            temp = this[$in].get(k1);\r\n        } else {\r\n            temp = new Map();\r\n            this[$in].set(k1, temp);\r\n        }\r\n        temp.set(k2, value);\r\n    }\r\n\r\n    get(k1, k2) {\r\n        temp = this[$in].get(k1);\r\n        if (temp) {\r\n            return temp.get(k2);\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    has(k1, k2) {\r\n        temp = this[$in].get(k1);\r\n        if (temp) {\r\n            return temp.has(k2);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    delete(k1, k2) {\r\n        temp = this[$in].get(k1);\r\n        if (temp) {\r\n            return temp.delete(k2);\r\n        }\r\n        return false;\r\n    }\r\n}\r\n","const BATCH_SIZE = 64;\r\n\r\nexport default class Batch {\r\n    constructor(core, material, geometry, ibo, offset) {\r\n        this.mat = material;\r\n        this.geo = geometry;\r\n        this.ibo = ibo;\r\n        this.offset = offset * BATCH_SIZE;\r\n        this.size = 0;\r\n        this.vao = core.ext.vao.createVertexArrayOES();\r\n\r\n        // vao\r\n        const gl = core.gl;\r\n        const shader = this.mat.shader;\r\n        core.ext.vao.bindVertexArrayOES(this.vao);\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.geo.vbo);\r\n        for (const attr in this.geo.attribute) {\r\n            if (shader.attribute[attr] !== undefined) {\r\n                gl.enableVertexAttribArray(shader.attribute[attr]);\r\n                gl.vertexAttribPointer(\r\n                    shader.attribute[attr],\r\n                    this.geo.attribute[attr].size,\r\n                    this.geo.attribute[attr].type,\r\n                    false,\r\n                    this.geo.attribute[attr].stride,\r\n                    this.geo.attribute[attr].offset\r\n                );\r\n            }\r\n        }\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.ibo);\r\n        let attr = gl.getAttribLocation(shader.program, 'ex');\r\n        gl.enableVertexAttribArray(attr);\r\n        gl.vertexAttribPointer(\r\n            attr,\r\n            3,\r\n            gl.FLOAT,\r\n            false,\r\n            48,\r\n            this.offset * 48\r\n        );\r\n        core.ext.inst.vertexAttribDivisorANGLE(attr, 1);\r\n        attr = gl.getAttribLocation(shader.program, 'ey');\r\n        gl.enableVertexAttribArray(attr);\r\n        gl.vertexAttribPointer(\r\n            attr,\r\n            3,\r\n            gl.FLOAT,\r\n            false,\r\n            48,\r\n            this.offset * 48 + 12\r\n        );\r\n        core.ext.inst.vertexAttribDivisorANGLE(attr, 1);\r\n        attr = gl.getAttribLocation(shader.program, 'ez');\r\n        gl.enableVertexAttribArray(attr);\r\n        gl.vertexAttribPointer(\r\n            attr,\r\n            3,\r\n            gl.FLOAT,\r\n            false,\r\n            48,\r\n            this.offset * 48 + 24\r\n        );\r\n        core.ext.inst.vertexAttribDivisorANGLE(attr, 1);\r\n        attr = gl.getAttribLocation(shader.program, 'et');\r\n        gl.enableVertexAttribArray(attr);\r\n        gl.vertexAttribPointer(\r\n            attr,\r\n            3,\r\n            gl.FLOAT,\r\n            false,\r\n            48,\r\n            this.offset * 48 + 36\r\n        );\r\n        core.ext.inst.vertexAttribDivisorANGLE(attr, 1);\r\n\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.geo.ebo);\r\n\r\n        // instance attr\r\n\r\n        core.ext.vao.bindVertexArrayOES(null);\r\n    }\r\n\r\n    add() {\r\n        this.size++;\r\n        if (this.size > BATCH_SIZE) throw new Error('BATCH_SIZE ERROR');\r\n        return this.offset + this.size - 1;\r\n    }\r\n\r\n    draw(core, camera) {\r\n        this.mat.use(core);\r\n        this.mat.shader.setUniform(core, 'PM', camera.pmat);\r\n        this.mat.shader.setUniform(core, 'WM', camera.wmat);\r\n        core.ext.vao.bindVertexArrayOES(this.vao);\r\n        core.ext.inst.drawElementsInstancedANGLE(core.gl.TRIANGLES, this.geo.length, core.gl.UNSIGNED_SHORT, 0, this.size);\r\n        core.ext.vao.bindVertexArrayOES(null);\r\n    }\r\n}\r\n","import Mesh from '../Components/Mesh';\r\nimport Camera from '../Components/Camera';\r\nimport Transform from '../Components/Transform';\r\nimport DMap from '../Math/DMap';\r\nimport Batch from '../Math/Batch';\r\n// import Animator from '../Components/Animator';\r\n\r\nconst $name = Symbol.for('name');\r\nconst IBO_LENGTH = 4096;\r\n\r\nlet gl = null;\r\nlet batch = null;\r\nlet screen = null;\r\nlet material = null;\r\nlet geometry = null;\r\nlet transform = null;\r\nconst ret = {};\r\n// let animator = null;\r\n// let skeleton = null;\r\nexport default class RenderSystem {\r\n    constructor(core) {\r\n        this[$name] = 'Render';\r\n        core.regEvent('onStart', this);\r\n        core.regEvent('onScreen', this);\r\n        core.regEvent('onRender', this);\r\n        core.regEvent('onModify', this);\r\n        this.camera = null;\r\n        this.envMesh = null;\r\n        this.batches = new DMap();\r\n        this.bid = 0;\r\n        this.ibo = null;\r\n        this.ibuf = new Float32Array(IBO_LENGTH * 12);\r\n    }\r\n\r\n    onStart(core) {\r\n        gl = core.gl;\r\n        gl.clearColor(0.7, 0.65, 0.6, 1);\r\n        this.ibo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.ibo);\r\n        gl.bufferData(gl.ARRAY_BUFFER, IBO_LENGTH * 48, gl.STREAM_DRAW);\r\n    }\r\n\r\n    onScreen(core) {\r\n        screen = core.getSystem('Screen');\r\n        core.gl.viewport(0, 0, screen.width, screen.height);\r\n        core.gldom.width = screen.width;\r\n        core.gldom.height = screen.height;\r\n    }\r\n\r\n    onRender(core) {\r\n        performance.mark('rnds');\r\n        core.gl.clear(core.gl.COLOR_BUFFER_BIT | core.gl.DEPTH_BUFFER_BIT);\r\n\r\n        if (this.camera) {\r\n            if (this.envMesh) {\r\n                material = core.getRes('material', this.envMesh.material);\r\n                material.use(core);\r\n                core.getRes('geometry', this.envMesh.geometry).use(core, material.shader);\r\n            }\r\n\r\n            for (const comp of core.getComp(Mesh)) {\r\n                if (comp.disable) continue;\r\n                transform = comp.owner.getCompOne(Transform);\r\n\r\n                if (comp.iid !== -1) {\r\n                    // update ibo\r\n                    this.ibuf[comp.iid * 12 + 0] = transform.wmat[0];\r\n                    this.ibuf[comp.iid * 12 + 1] = transform.wmat[1];\r\n                    this.ibuf[comp.iid * 12 + 2] = transform.wmat[2];\r\n                    this.ibuf[comp.iid * 12 + 3] = transform.wmat[4];\r\n                    this.ibuf[comp.iid * 12 + 4] = transform.wmat[5];\r\n                    this.ibuf[comp.iid * 12 + 5] = transform.wmat[6];\r\n                    this.ibuf[comp.iid * 12 + 6] = transform.wmat[8];\r\n                    this.ibuf[comp.iid * 12 + 7] = transform.wmat[9];\r\n                    this.ibuf[comp.iid * 12 + 8] = transform.wmat[10];\r\n                    this.ibuf[comp.iid * 12 + 9] = transform.wmat[12];\r\n                    this.ibuf[comp.iid * 12 + 10] = transform.wmat[13];\r\n                    this.ibuf[comp.iid * 12 + 11] = transform.wmat[14];\r\n                    continue;\r\n                }\r\n\r\n                material = core.getRes('material', comp.material);\r\n                material.use(core);\r\n                material.shader.setUniform(core, 'PM', this.camera.pmat);\r\n                material.shader.setUniform(core, 'WM', this.camera.wmat);\r\n                material.shader.setUniform(core, 'OM', transform.wmat);\r\n\r\n                // if (comp.skeleton) {\r\n                //     animator = comp.owner.getCompOne(Animator);\r\n                //     if (animator) {\r\n                //         skeleton = core.getRes('skeleton', animator.skeleton);\r\n                //         material.shader.setUniform(core, 'key', animator.key);\r\n                //         core.gl.uniform1i(material.shader.uniform.bones, 8);\r\n                //         core.gl.activeTexture(core.gl.TEXTURE0 + 8);\r\n                //         core.gl.bindTexture(core.gl.TEXTURE_2D, skeleton.bakeTex);\r\n                //     }\r\n                // }\r\n\r\n                core.getRes('geometry', comp.geometry).use(core, material.shader);\r\n            }\r\n\r\n            // TODO Draw Batches\r\n            gl = core.gl;\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.ibo);\r\n            gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.ibuf);\r\n            this.batches.start();\r\n            while (this.batches.next(ret)) {\r\n                ret.value.draw(core, this.camera);\r\n            }\r\n        }\r\n        performance.mark('rnde');\r\n        performance.measure('render', 'rnds', 'rnde');\r\n    }\r\n\r\n    onModify(core) {\r\n        for (const comp of core.getNewComp(Camera)) {\r\n            this.camera = comp;\r\n            screen = core.getSystem('Screen');\r\n            this.camera.aspect = screen.width / screen.height;\r\n            this.envMesh = comp.owner.getCompOne(Mesh);\r\n        }\r\n\r\n        for (const comp of core.getNewComp(Mesh)) {\r\n            material = core.getRes('material', comp.material);\r\n            if (material.batch) {\r\n                geometry = core.getRes('geometry', comp.geometry);\r\n                batch = this.batches.get(comp.material, comp.geometry);\r\n                if (!batch) {\r\n                    batch = new Batch(\r\n                        core,\r\n                        material,\r\n                        geometry,\r\n                        this.ibo,\r\n                        this.bid\r\n                    );\r\n                    this.bid++;\r\n                    this.batches.set(comp.material, comp.geometry, batch);\r\n                }\r\n                comp.iid = batch.add();\r\n            }\r\n        }\r\n    }\r\n\r\n    setMainCamera(camera) { this.camera = camera; }\r\n}\r\n","import Rotation from '../Components/Rotation';\r\nimport Transform from '../Components/Transform';\r\nimport Quat from '../Math/Quat';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nlet transform = null;\r\nconst quat = new Quat();\r\nexport default class RotationSystem {\r\n    constructor(core) {\r\n        this[$name] = 'Rotation';\r\n        core.regEvent('onUpdate', this);\r\n    }\r\n\r\n    onUpdate(core) {\r\n        for (const comp of core.getComp(Rotation)) {\r\n            if (comp.disable) continue;\r\n            transform = comp.owner.getCompOne(Transform);\r\n            quat.fromAxisAngle(comp.axis, comp.angle);\r\n            transform.orientation.premul(quat);\r\n        }\r\n    }\r\n}\r\n","import Movement from '../Components/Movement';\r\nimport Transform from '../Components/Transform';\r\nimport Vec3 from '../Math/Vec3';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nlet transform = null;\r\nexport default class MovementSystem {\r\n    constructor(core) {\r\n        this[$name] = 'Movement';\r\n        core.regEvent('onStart', this);\r\n        core.regEvent('onUpdate', this);\r\n        this.limearSpeed = new Vec3();\r\n    }\r\n\r\n    onStart(core) {\r\n        this.time = core.getSystem('Time');\r\n    }\r\n\r\n    onUpdate(core) {\r\n        for (const comp of core.getComp(Movement)) {\r\n            if (comp.disable) continue;\r\n            transform = comp.owner.getCompOne(Transform);\r\n            if (comp.linear && comp.owner.owner === null) transform.position.addScaledVec(this.limearSpeed, this.time.deltaTime);\r\n            transform.position.addScaledVec(comp.direction, this.time.deltaTime * comp.speed);\r\n        }\r\n    }\r\n}\r\n","import Camera from '../Components/Camera';\r\nimport Transform from '../Components/Transform';\r\nimport OrbitControl from '../Components/OrbitControl';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nlet input = null;\r\nlet camera = null;\r\nlet transform = null;\r\nexport default class OrbitControlSystem {\r\n    constructor(core) {\r\n        this[$name] = 'OrbitControl';\r\n        core.regEvent('onStart', this);\r\n        core.regEvent('onScreen', this);\r\n        core.regEvent('onLateUpdate', this);\r\n        this.count = 0;\r\n        this.screen = null;\r\n    }\r\n\r\n    onStart(core) {\r\n        this.screen = core.getSystem('Screen');\r\n        this.input = core.getSystem('Input');\r\n    }\r\n\r\n    onScreen(core) {\r\n        for (const comp of core.getComp(OrbitControl)) {\r\n            if (comp.disable) continue;\r\n            camera = comp.owner.getCompOne(Camera);\r\n            camera.aspect = this.screen.width / this.screen.height;\r\n            camera.pmat.perspective(camera.fov, camera.aspect, camera.near, camera.far);\r\n        }\r\n    }\r\n\r\n    onLateUpdate(core) { // TODO!!!\r\n        input = this.input;\r\n        for (const comp of core.getComp(OrbitControl)) {\r\n            if (comp.disable) continue;\r\n\r\n            transform = comp.owner.getCompOne(Transform);\r\n            camera = comp.owner.getCompOne(Camera);\r\n            if (input.keyState(input.VK_LBUTTON)) {\r\n                if (!comp.pfrozen) comp.polar -= input.mouseDeltaPos().y * comp.speed;\r\n                if (!comp.afrozen) comp.azimuthal -= input.mouseDeltaPos().x * comp.speed;\r\n                camera.wmat.orbit(comp.polar, comp.azimuthal, comp.distance, transform.position);\r\n            } else if (input.mouseWheel()) {\r\n                if (!comp.dfrozen) comp.distance -= input.mouseWheel() * comp.speed * 100;\r\n                camera.wmat.orbit(comp.polar, comp.azimuthal, comp.distance, transform.position);\r\n            } else if (comp.nupd) {\r\n                comp.nupd = false;\r\n                camera.wmat.orbit(comp.polar, comp.azimuthal, comp.distance, transform.position);\r\n                camera.aspect = this.screen.width / this.screen.height;\r\n                camera.pmat.perspective(camera.fov, camera.aspect, camera.near, camera.far);\r\n            }\r\n        }\r\n    }\r\n}\r\n","import Transform from '../Components/Transform';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nlet towner = null;\r\nlet transform = null;\r\nexport default class TransformSystem {\r\n    constructor(core) {\r\n        this[$name] = 'Transform';\r\n        core.regEvent('onTransform', this);\r\n        core.regEvent('onModify', this);\r\n    }\r\n\r\n    onTransform(core) {\r\n        performance.mark('trfs');\r\n        for (const entity of core.getEntity()) {\r\n            if (entity.depth === 0) this.calcTransform(entity);\r\n        }\r\n        performance.mark('trfe');\r\n        performance.measure('transform', 'trfs', 'trfe');\r\n    }\r\n\r\n    onModify(core) { // TODO!!!\r\n        for (const comp of core.getNewComp(Transform)) {\r\n            this.calcTransform(comp.owner);\r\n        }\r\n    }\r\n\r\n    calcTransform(entity) {\r\n        transform = entity.getCompOne(Transform);\r\n        if (transform) {\r\n            transform.lmat.fromTRS(transform.position, transform.orientation, transform.scale);\r\n            transform.wmat.copy(transform.lmat);\r\n            if (entity.owner) {\r\n                towner = entity.owner.getCompOne(Transform);\r\n                transform.wmat.mul(towner.wmat);\r\n            }\r\n        }\r\n        for (const child of entity.child) this.calcTransform(child);\r\n    }\r\n}\r\n","import ATrigger from '../Components/ATrigger';\r\nimport BTrigger from '../Components/BTrigger';\r\nimport STrigger from '../Components/STrigger';\r\nimport Transform from '../Components/Transform';\r\nimport Vec3 from '../Math/Vec3';\r\n\r\nlet temp = 0;\r\nconst $name = Symbol.for('name');\r\nconst tvec = new Vec3();\r\nconst tvec2 = new Vec3();\r\n\r\nfunction STS(c1, c2) {\r\n    tvec.copy(c1.pos).sub(c2.pos);\r\n    return (tvec.length - c1.radius - c2.radius) <= 0;\r\n}\r\nfunction ATS(c1, c2) {\r\n    tvec.copy(c2.pos).sub(c1.pos).abs().sub(c1.size).maxs(0);\r\n    return (tvec.length - c2.radius) <= 0;\r\n}\r\nfunction ATA(c1, c2) {\r\n    tvec.copy(c2.pos).sub(c1.pos).abs().sub(c1.size).sub(c2.size);\r\n    return (tvec.x <= 0) && (tvec.y <= 0) && (tvec.z <= 0);\r\n}\r\nfunction BTS(c1, c2) {\r\n    tvec.copy(c1.pos).sub(c1.opos);\r\n    tvec2.copy(c2.pos).sub(c1.opos);\r\n    temp = tvec.dot(tvec2) / c1.length / c1.length;\r\n    temp = Math.min(1.0, Math.max(0.0, temp));\r\n    tvec.mulNumber(temp).add(c1.opos).sub(c2.pos);\r\n\r\n    return (tvec.length - c1.radius - c2.radius) <= 0;\r\n}\r\nfunction ATB(c1, c2) {\r\n    tvec.copy(c2.pos).sub(c1.pos).abs().sub(c1.size).maxs(0);\r\n    return (tvec.length - c2.radius) <= 0;\r\n}\r\n\r\nclass Branch {\r\n    constructor(xl, yl, xh, yh, stp, maxStp) {\r\n        this.child = null;\r\n        this.inner = false;\r\n        this.xl = xl;\r\n        this.yl = yl;\r\n        this.xh = xh;\r\n        this.yh = yh;\r\n        this.c1 = null;\r\n        this.c2 = null;\r\n        this.bs = null;\r\n        this.es = null;\r\n        this.ba = null;\r\n        this.ea = null;\r\n\r\n        this.tx = (xl + xh) * 0.5;\r\n        this.ty = (yl + yh) * 0.5;\r\n\r\n        if (stp < maxStp) {\r\n            this.child = new Array(4);\r\n            this.child[0] = new Branch(xl, yl, this.tx, this.ty, stp + 1, maxStp);\r\n            this.child[1] = new Branch(this.tx, yl, xh, this.ty, stp + 1, maxStp);\r\n            this.child[2] = new Branch(xl, this.ty, this.tx, yh, stp + 1, maxStp);\r\n            this.child[3] = new Branch(this.tx, this.ty, xh, yh, stp + 1, maxStp);\r\n        }\r\n    }\r\n\r\n    clear() {\r\n        this.bs = null;\r\n        this.es = null;\r\n        this.ba = null;\r\n        this.ea = null;\r\n        if (this.child && this.inner) {\r\n            this.child[0].clear();\r\n            this.child[1].clear();\r\n            this.child[2].clear();\r\n            this.child[3].clear();\r\n        }\r\n        this.inner = false;\r\n    }\r\n\r\n    adds(comp, x, y, r) {\r\n        this.tx = (this.xl + this.xh) * 0.5;\r\n        this.ty = (this.yl + this.yh) * 0.5;\r\n\r\n        if (this.child) {\r\n            if (x + r < this.tx && y + r < this.ty) {\r\n                this.inner = true;\r\n                this.child[0].adds(comp, x, y, r);\r\n            } else if (x - r > this.tx && y + r < this.ty) {\r\n                this.inner = true;\r\n                this.child[1].adds(comp, x, y, r);\r\n            } else if (x + r < this.tx && y - r > this.ty) {\r\n                this.inner = true;\r\n                this.child[2].adds(comp, x, y, r);\r\n            } else if (x - r > this.tx && y - r > this.ty) {\r\n                this.inner = true;\r\n                this.child[3].adds(comp, x, y, r);\r\n            } else {\r\n                if (this.es === null) {\r\n                    this.bs = comp;\r\n                } else {\r\n                    this.es.next = comp;\r\n                }\r\n                this.es = comp;\r\n                comp.next = null;\r\n            }\r\n        } else {\r\n            if (this.es === null) {\r\n                this.bs = comp;\r\n            } else {\r\n                this.es.next = comp;\r\n            }\r\n            this.es = comp;\r\n            comp.next = null;\r\n        }\r\n    }\r\n\r\n    adda(comp, x, y, s) {\r\n        this.tx = (this.xl + this.xh) * 0.5;\r\n        this.ty = (this.yl + this.yh) * 0.5;\r\n\r\n        if (this.child) {\r\n            if (x + s.x < this.tx && y + s.z < this.ty) {\r\n                this.inner = true;\r\n                this.child[0].adda(comp, x, y, s);\r\n            } else if (x - s.x > this.tx && y + s.z < this.ty) {\r\n                this.inner = true;\r\n                this.child[1].adda(comp, x, y, s);\r\n            } else if (x + s.x < this.tx && y - s.z > this.ty) {\r\n                this.inner = true;\r\n                this.child[2].adda(comp, x, y, s);\r\n            } else if (x - s.x > this.tx && y - s.z > this.ty) {\r\n                this.inner = true;\r\n                this.child[3].adda(comp, x, y, s);\r\n            } else {\r\n                if (this.ea === null) {\r\n                    this.ba = comp;\r\n                } else {\r\n                    this.ea.next = comp;\r\n                }\r\n                this.ea = comp;\r\n                comp.next = null;\r\n            }\r\n        } else {\r\n            if (this.ea === null) {\r\n                this.ba = comp;\r\n            } else {\r\n                this.ea.next = comp;\r\n            }\r\n            this.ea = comp;\r\n            comp.next = null;\r\n        }\r\n    }\r\n\r\n    test() {\r\n        // STrigger\r\n        for (this.c1 = this.bs; this.c1 !== null; this.c1 = this.c1.next) {\r\n            // STrigger\r\n            for (this.c2 = this.c1.next; this.c2 !== null; this.c2 = this.c2.next) {\r\n                if (STS(this.c1, this.c2)) {\r\n                    this.c1.inner.push(this.c2);\r\n                    this.c2.inner.push(this.c1);\r\n                }\r\n            }\r\n            // ATrigger\r\n            for (this.c2 = this.ba; this.c2 !== null; this.c2 = this.c2.next) {\r\n                if (ATS(this.c2, this.c1)) {\r\n                    this.c1.inner.push(this.c2);\r\n                    this.c2.inner.push(this.c1);\r\n                }\r\n            }\r\n            // Child three\r\n            if (this.inner && this.child) {\r\n                this.child[0].tests(this.c1);\r\n                this.child[1].tests(this.c1);\r\n                this.child[2].tests(this.c1);\r\n                this.child[3].tests(this.c1);\r\n            }\r\n        }\r\n        // ATrigger\r\n        for (this.c1 = this.ba; this.c1 !== null; this.c1 = this.c1.next) {\r\n            // ATrigger\r\n            for (this.c2 = this.c1.next; this.c2 !== null; this.c2 = this.c2.next) {\r\n                if (ATA(this.c1, this.c2)) {\r\n                    this.c1.inner.push(this.c2);\r\n                    this.c2.inner.push(this.c1);\r\n                }\r\n            }\r\n            // Child three\r\n            if (this.inner && this.child) {\r\n                this.child[0].testa(this.c1);\r\n                this.child[1].testa(this.c1);\r\n                this.child[2].testa(this.c1);\r\n                this.child[3].testa(this.c1);\r\n            }\r\n        }\r\n        // Child three\r\n        if (this.inner && this.child) {\r\n            this.child[0].test();\r\n            this.child[1].test();\r\n            this.child[2].test();\r\n            this.child[3].test();\r\n        }\r\n    }\r\n\r\n    tests(comp) {\r\n        for (this.c1 = this.bs; this.c1 !== null; this.c1 = this.c1.next) {\r\n            if (STS(this.c1, comp)) {\r\n                this.c1.inner.push(comp);\r\n                comp.inner.push(this.c1);\r\n            }\r\n        }\r\n        for (this.c1 = this.ba; this.c1 !== null; this.c1 = this.c1.next) {\r\n            if (ATS(this.c1, comp)) {\r\n                this.c1.inner.push(comp);\r\n                comp.inner.push(this.c1);\r\n            }\r\n        }\r\n        if (this.inner && this.child) {\r\n            this.child[0].tests(comp);\r\n            this.child[1].tests(comp);\r\n            this.child[2].tests(comp);\r\n            this.child[3].tests(comp);\r\n        }\r\n    }\r\n\r\n    testa(comp) {\r\n        for (this.c1 = this.ba; this.c1 !== null; this.c1 = this.c1.next) {\r\n            if (ATA(this.c1, comp)) {\r\n                this.c1.inner.push(comp);\r\n                comp.inner.push(this.c1);\r\n            }\r\n        }\r\n        for (this.c1 = this.bs; this.c1 !== null; this.c1 = this.c1.next) {\r\n            if (ATS(comp, this.c1)) {\r\n                this.c1.inner.push(comp);\r\n                comp.inner.push(this.c1);\r\n            }\r\n        }\r\n        if (this.inner && this.child) {\r\n            this.child[0].testa(comp);\r\n            this.child[1].testa(comp);\r\n            this.child[2].testa(comp);\r\n            this.child[3].testa(comp);\r\n        }\r\n    }\r\n}\r\n\r\nconst TREEPOSX = 0;\r\nconst TREEPOSY = 700;\r\nconst TREESIZE = 1024;\r\nconst TREESTEP = 5;\r\nexport default class TriggerSystem {\r\n    constructor(core) {\r\n        this[$name] = 'Trigger';\r\n        core.regEvent('onStart', this);\r\n        core.regEvent('onPHYUpdate', this);\r\n        this.movement = null;\r\n        this.time = null;\r\n    }\r\n\r\n    onStart(core) {\r\n        this.time = core.getSystem('Time');\r\n        this.movement = core.getSystem('Movement');\r\n        this.tree = new Branch(\r\n            TREEPOSX - TREESIZE,\r\n            TREEPOSY - TREESIZE,\r\n            TREEPOSX + TREESIZE,\r\n            TREEPOSY + TREESIZE,\r\n            0,\r\n            TREESTEP\r\n        );\r\n    }\r\n\r\n    onPHYUpdate(core) {\r\n        performance.mark('trs');\r\n\r\n        this.tree.clear();\r\n        for (const comp of core.getComp(STrigger)) {\r\n            comp.inner.length = 0;\r\n            comp.owner.getCompOne(Transform).worldPosition(comp.pos).add(comp.offset);\r\n            this.tree.adds(comp, comp.pos.x, comp.pos.z, comp.radius);\r\n        }\r\n        for (const comp of core.getComp(ATrigger)) {\r\n            comp.inner.length = 0;\r\n            comp.owner.getCompOne(Transform).worldPosition(comp.pos).add(comp.offset);\r\n            this.tree.adda(comp, comp.pos.x, comp.pos.z, comp.size);\r\n        }\r\n        for (const comp of core.getComp(BTrigger)) {\r\n            comp.inner.length = 0;\r\n            comp.opos.copy(comp.pos).addScaledVec(this.movement.limearSpeed, this.time.deltaTime);\r\n            comp.owner.getCompOne(Transform).worldPosition(comp.pos).add(comp.offset);\r\n            if (comp.upd) {\r\n                comp.upd = false;\r\n                comp.opos.copy(comp.pos);\r\n            }\r\n            tvec.copy(comp.pos).sub(comp.opos);\r\n            comp.length = tvec.length;\r\n        }\r\n        this.tree.test();\r\n\r\n        for (const comp of core.getComp(BTrigger)) {\r\n            for (const comp2 of core.getComp(STrigger)) {\r\n                if (comp.length < 0.0001) {\r\n                    if (STS(comp, comp2)) {\r\n                        comp2.inner.push(comp);\r\n                        comp.inner.push(comp2);\r\n                    }\r\n                } else if (BTS(comp, comp2)) {\r\n                    comp2.inner.push(comp);\r\n                    comp.inner.push(comp2);\r\n                }\r\n            }\r\n        }\r\n        for (const comp of core.getComp(BTrigger)) {\r\n            for (const comp2 of core.getComp(ATrigger)) {\r\n                if (comp.length < 0.0001) {\r\n                    if (ATS(comp2, comp)) {\r\n                        comp2.inner.push(comp);\r\n                        comp.inner.push(comp2);\r\n                    }\r\n                } else if (ATB(comp2, comp)) {\r\n                    comp2.inner.push(comp);\r\n                    comp.inner.push(comp2);\r\n                }\r\n            }\r\n        }\r\n\r\n        performance.mark('tre');\r\n        performance.measure('trigger', 'trs', 'tre');\r\n    }\r\n}\r\n","import Transform from '../Components/Transform';\r\nimport Mesh from '../Components/Mesh';\r\nimport Movement from '../Components/Movement';\r\nimport ATrigger from '../Components/ATrigger';\r\nimport STrigger from '../Components/STrigger';\r\nimport Vec3 from '../Math/Vec3';\r\n\r\nlet child = null;\r\nlet movement = null;\r\nlet transform = null;\r\nconst tPos = new Vec3();\r\n\r\nexport function moveSphere(barrier, it, pos) {\r\n    transform = barrier[it].getCompOne(Transform);\r\n    transform.position.copy(pos);\r\n    transform.position.y = 6;\r\n    movement = barrier[it].getCompOne(Movement);\r\n    movement.speed = Math.random() * 20 * pos.x / Math.abs(pos.x);\r\n}\r\n\r\nexport function moveStatic(barrier, it, pos) {\r\n    transform = barrier[it].getCompOne(Transform);\r\n    transform.position.copy(pos);\r\n}\r\n\r\nexport function moveTrain(barrier, it, pos) {\r\n    tPos.copy(pos);\r\n    tPos.x = 0;\r\n    transform = barrier[it].getCompOne(Transform);\r\n    transform.position.copy(tPos);\r\n\r\n    tPos.copy(pos);\r\n    tPos.x -= 28;\r\n    tPos.y = 5;\r\n    tPos.z = 0;\r\n    for (child of barrier[it].child) {\r\n        movement = child.getCompOne(Movement);\r\n        transform = child.getCompOne(Transform);\r\n        transform.position.copy(tPos);\r\n        tPos.x += 28;\r\n        movement.speed = pos.x < 0 ? 30 : -30;\r\n    }\r\n}\r\n\r\nexport function createBonusBM(core, barrier, it, pos) {\r\n    barrier[it] = core.newEntity(null, true);\r\n    barrier[it].addTag('bonus');\r\n    barrier[it].addTag('bm');\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'BONUS_LIGHT',\r\n        material: 'light_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'BONUS_BM',\r\n        material: 'bonus_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: 0, y: 0, z: 1 },\r\n        speed: 0\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 2, y: 64, z: 2 }\r\n    });\r\n}\r\n\r\nexport function createBonusSP(core, barrier, it, pos) {\r\n    barrier[it] = core.newEntity(null, true);\r\n    barrier[it].addTag('bonus');\r\n    barrier[it].addTag('sp');\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'BONUS_LIGHT',\r\n        material: 'light_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'BONUS_SP',\r\n        material: 'bonus_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: 0, y: 0, z: 1 },\r\n        speed: 0\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 2, y: 64, z: 2 }\r\n    });\r\n}\r\n\r\nexport function createBonusST(core, barrier, it, pos) {\r\n    barrier[it] = core.newEntity(null, true);\r\n    barrier[it].addTag('bonus');\r\n    barrier[it].addTag('st');\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'BONUS_LIGHT',\r\n        material: 'light_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'BONUS_ST',\r\n        material: 'bonus_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: 0, y: 0, z: 1 },\r\n        speed: 0\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 2, y: 64, z: 2 }\r\n    });\r\n}\r\n\r\nexport function createSphere(core, barrier, it, pos) {\r\n    barrier[it] = core.newEntity(null, true);\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    }).position.y = 6;\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'SPHERE_GOLD',\r\n        material: 'gold_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'SPHERE_SILVER',\r\n        material: 'silver_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'SPHERE_LIGHT',\r\n        material: 'light_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: -1, y: 0, z: 0 },\r\n        speed: Math.random() * 20 * pos.x / Math.abs(pos.x)\r\n    });\r\n    core.newComp(STrigger, barrier[it], true, {\r\n        radius: 1\r\n    });\r\n}\r\n\r\nexport function createPillar1(core, barrier, it, pos) {\r\n    barrier[it] = core.newEntity(null, true);\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR1_GOLD',\r\n        material: 'gold_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR1_SILVER',\r\n        material: 'silver_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR1_WALL_W',\r\n        material: 'wall_w_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR1_WALL_WG',\r\n        material: 'wall_wg_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: 0, y: 0, z: 1 },\r\n        speed: 0\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 4, y: 26, z: 4 }\r\n    });\r\n}\r\n\r\nexport function createPillar2(core, barrier, it, pos) {\r\n    barrier[it] = core.newEntity(null, true);\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR2_SILVER',\r\n        material: 'silver_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR2_WALL_W',\r\n        material: 'wall_w_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR2_WALL_WG',\r\n        material: 'wall_wg_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: 0, y: 0, z: 1 },\r\n        speed: 0\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 4, y: 26, z: 4 }\r\n    });\r\n}\r\n\r\nexport function createPillar3(core, barrier, it, pos) {\r\n    barrier[it] = core.newEntity(null, true);\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR3_SILVER',\r\n        material: 'silver_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR3_WALL_W',\r\n        material: 'wall_w_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: 0, y: 0, z: 1 },\r\n        speed: 0\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 4, y: 26, z: 4 }\r\n    });\r\n}\r\n\r\nexport function createPillar4(core, barrier, it, pos) {\r\n    barrier[it] = core.newEntity(null, true);\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR4_GOLD',\r\n        material: 'gold_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR4_SILVER',\r\n        material: 'silver_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR4_WALL_W',\r\n        material: 'wall_w_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR4_WALL_WG',\r\n        material: 'wall_wg_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: 0, y: 0, z: 1 },\r\n        speed: 0\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 4, y: 26, z: 4 }\r\n    });\r\n}\r\n\r\nexport function createPillar5(core, barrier, it, pos) {\r\n    barrier[it] = core.newEntity(null, true);\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR5_GOLD',\r\n        material: 'gold_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR5_SILVER',\r\n        material: 'silver_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR5_WALL_W',\r\n        material: 'wall_w_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'PILLAR5_WALL_WG',\r\n        material: 'wall_wg_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: 0, y: 0, z: 1 },\r\n        speed: 0\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 4, y: 26, z: 4 }\r\n    });\r\n}\r\n\r\nexport function createColumn1(core, barrier, it, pos) {\r\n    barrier[it] = core.newEntity(null, true);\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'COLUMN1_GOLD',\r\n        material: 'gold_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'COLUMN1_WALL_S',\r\n        material: 'wall_s_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'COLUMN1_WALL_W',\r\n        material: 'wall_w_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'COLUMN1_WALL_WG',\r\n        material: 'wall_wg_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: 0, y: 0, z: 1 },\r\n        speed: 0\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 7, y: 64, z: 7 }\r\n    });\r\n}\r\n\r\nexport function createColumn2(core, barrier, it, pos) {\r\n    barrier[it] = core.newEntity(null, true);\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'COLUMN2_GOLD',\r\n        material: 'gold_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'COLUMN2_SILVER',\r\n        material: 'silver_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'COLUMN2_WALL_S',\r\n        material: 'wall_s_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'COLUMN2_WALL_W',\r\n        material: 'wall_w_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'COLUMN2_WALL_WG',\r\n        material: 'wall_wg_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: 0, y: 0, z: 1 },\r\n        speed: 0\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 7, y: 64, z: 7 }\r\n    });\r\n}\r\n\r\nexport function createColumn3(core, barrier, it, pos) {\r\n    barrier[it] = core.newEntity(null, true);\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'COLUMN3_GOLD',\r\n        material: 'gold_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'COLUMN3_SILVER',\r\n        material: 'silver_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'COLUMN3_WALL_S',\r\n        material: 'wall_s_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'COLUMN3_WALL_W',\r\n        material: 'wall_w_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'COLUMN3_WALL_WG',\r\n        material: 'wall_wg_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: 0, y: 0, z: 1 },\r\n        speed: 0\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 7, y: 64, z: 7 }\r\n    });\r\n}\r\n\r\nexport function createTunnel1(core, barrier, it, pos) {\r\n    barrier[it] = core.newEntity(null, true);\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'TUNNEL1_GOLD',\r\n        material: 'gold_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'TUNNEL1_WALL_S',\r\n        material: 'wall_s_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'TUNNEL1_WALL_WG',\r\n        material: 'wall_wg_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: 0, y: 0, z: 1 },\r\n        speed: 0\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 8, y: 64, z: 67 }\r\n    });\r\n}\r\n\r\nexport function createTunnel2(core, barrier, it, pos) {\r\n    barrier[it] = core.newEntity(null, true);\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'TUNNEL2_GOLD',\r\n        material: 'gold_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'TUNNEL2_WALL_S',\r\n        material: 'wall_s_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'TUNNEL2_WALL_W',\r\n        material: 'wall_w_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'TUNNEL2_WALL_WG',\r\n        material: 'wall_wg_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: 0, y: 0, z: 1 },\r\n        speed: 0\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 8, y: 64, z: 67 }\r\n    });\r\n}\r\n\r\nexport function createTrain(core, barrier, it, pos) {\r\n    const tmp = pos.x;\r\n\r\n    pos.x = 0;\r\n    barrier[it] = core.newEntity(null, true);\r\n    core.newComp(Transform, barrier[it], true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'GATE_GOLD',\r\n        material: 'gold_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'GATE_LIGHT',\r\n        material: 'light_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'GATE_WALL_S',\r\n        material: 'wall_s_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'GATE_WALL_SG',\r\n        material: 'wall_sg_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'GATE_WALL_W',\r\n        material: 'wall_w_mat'\r\n    });\r\n    core.newComp(Mesh, barrier[it], true, {\r\n        geometry: 'GATE_WALL_WG',\r\n        material: 'wall_wg_mat'\r\n    });\r\n    core.newComp(Movement, barrier[it], true, {\r\n        direction: { x: 0, y: 0, z: 1 },\r\n        speed: 0\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 20, y: 20, z: 20 },\r\n        offset: { x: 220, y: 0, z: 0 }\r\n    });\r\n    core.newComp(ATrigger, barrier[it], true, {\r\n        size: { x: 20, y: 20, z: 20 },\r\n        offset: { x: -220, y: 0, z: 0 }\r\n    });\r\n\r\n    pos.x = tmp - 28;\r\n    pos.y = 5;\r\n    pos.z = 0;\r\n\r\n    let ent = core.newEntity(barrier[it], true);\r\n    core.newComp(Transform, ent, true, {\r\n        position: pos,\r\n        scale: { x: 0.7, y: 0.7, z: 0.7 }\r\n    });\r\n    core.newComp(Mesh, ent, true, {\r\n        geometry: 'PYRAMID_GOLD',\r\n        material: 'gold_mat'\r\n    });\r\n    core.newComp(Mesh, ent, true, {\r\n        geometry: 'PYRAMID_SILVER',\r\n        material: 'silver_mat'\r\n    });\r\n    core.newComp(Movement, ent, true, {\r\n        direction: { x: 1, y: 0, z: 0 },\r\n        speed: tmp < 0 ? 30 : -30\r\n    });\r\n    core.newComp(STrigger, ent, true, {\r\n        radius: 7\r\n    });\r\n\r\n    pos.x += 28;\r\n    ent = core.newEntity(barrier[it], true);\r\n    core.newComp(Transform, ent, true, {\r\n        position: pos\r\n    });\r\n    core.newComp(Mesh, ent, true, {\r\n        geometry: 'PYRAMID_GOLD',\r\n        material: 'gold_mat'\r\n    });\r\n    core.newComp(Mesh, ent, true, {\r\n        geometry: 'PYRAMID_SILVER',\r\n        material: 'silver_mat'\r\n    });\r\n    core.newComp(Movement, ent, true, {\r\n        direction: { x: 1, y: 0, z: 0 },\r\n        speed: tmp < 0 ? 30 : -30\r\n    });\r\n    core.newComp(STrigger, ent, true, {\r\n        radius: 10\r\n    });\r\n\r\n    pos.x += 28;\r\n    ent = core.newEntity(barrier[it], true);\r\n    core.newComp(Transform, ent, true, {\r\n        position: pos,\r\n        scale: { x: 0.7, y: 0.7, z: 0.7 }\r\n    });\r\n    core.newComp(Mesh, ent, true, {\r\n        geometry: 'PYRAMID_GOLD',\r\n        material: 'gold_mat'\r\n    });\r\n    core.newComp(Mesh, ent, true, {\r\n        geometry: 'PYRAMID_SILVER',\r\n        material: 'silver_mat'\r\n    });\r\n    core.newComp(Movement, ent, true, {\r\n        direction: { x: 1, y: 0, z: 0 },\r\n        speed: tmp < 0 ? 30 : -30\r\n    });\r\n    core.newComp(STrigger, ent, true, {\r\n        radius: 7\r\n    });\r\n}\r\n","import * as Helper from './GameSystemHelper';\r\nimport Transform from '../Components/Transform';\r\nimport BTrigger from '../Components/BTrigger';\r\nimport OrbitControl from '../Components/OrbitControl';\r\nimport Vec3 from '../Math/Vec3';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nlet it = 0;\r\nlet tmp = 0;\r\nlet transform = null;\r\nconst zAxis = new Vec3(0, -0.15, 0.98868689);\r\nconst BARRIER_MAX = 131;\r\nconst BONUS_TIME = 8;\r\nconst SCOREDT = 0.25;\r\nconst tPos = new Vec3();\r\n\r\nexport default class GameSystem {\r\n    constructor(core) {\r\n        this[$name] = 'Game';\r\n        core.regEvent('onStart', this);\r\n        core.regEvent('onUpdate', this);\r\n        core.regEvent('onLateUpdate', this);\r\n\r\n        this.state = 0;\r\n        this.airplane = null;\r\n\r\n        this.bonus = {\r\n            bm: false,\r\n            sp: false,\r\n            st: false,\r\n            bmt: 0,\r\n            spt: 0,\r\n            stt: 0\r\n        };\r\n        this.xspeed = 0;\r\n        this.zspeed = 500;\r\n        this.xmove = 0;\r\n        this.yPos = 6;\r\n\r\n        this.uiscr = document.getElementById('app-ui-scr');\r\n        this.uibg = document.getElementById('app-ui-bg');\r\n        this.uibm = document.getElementById('app-ui-bm');\r\n        this.uisp = document.getElementById('app-ui-sp');\r\n        this.uist = document.getElementById('app-ui-st');\r\n        this.uiscore = document.getElementById('app-ui-score');\r\n        this.uiresult = document.getElementById('app-ui-result');\r\n\r\n        this.mul = 1;\r\n        this.score = 0;\r\n        this.scoredt = 0;\r\n\r\n        console.log(core); // TODO!!!\r\n    }\r\n\r\n    onStart(core) {\r\n        this.time = core.getSystem('Time');\r\n        this.input = core.getSystem('Input');\r\n        this.screen = core.getSystem('Screen');\r\n        this.movement = core.getSystem('Movement');\r\n\r\n        [this.airplane] = core.getEntitiesByName('airplane');\r\n        [this.camera] = core.getEntitiesByName('player');\r\n\r\n        [this.g1] = core.getEntitiesByName('ground1');\r\n        [this.g2] = core.getEntitiesByName('ground2');\r\n        [this.g3] = core.getEntitiesByName('ground3');\r\n        [this.g4] = core.getEntitiesByName('ground4');\r\n\r\n        this.barrier = new Array(BARRIER_MAX);\r\n        this.createBarrier(core);\r\n\r\n        // Hide load screen\r\n        this.time.timeScale = 0;\r\n        setTimeout(() => {\r\n            const start = document.getElementById('app-ui-start');\r\n            start.innerHTML = 'START';\r\n            start.addEventListener('click', () => {\r\n                this.uibg.style.display = 'none';\r\n                this.time.timeScale = 1;\r\n                this.state = 1;\r\n                this.start(core);\r\n            });\r\n            start.addEventListener('touchstart', () => {\r\n                this.uibg.style.display = 'none';\r\n                this.time.timeScale = 1;\r\n                this.state = 1;\r\n                this.start(core);\r\n            });\r\n        }, 1000);\r\n    }\r\n\r\n    onUpdate() {\r\n        if (this.state === 0) return;\r\n\r\n        this.score += this.time.deltaTime * this.mul * 10;\r\n        this.scoredt += this.time.deltaTime;\r\n        if (this.scoredt >= SCOREDT) {\r\n            this.scoredt = 0;\r\n            this.uiscore.innerText = `${Math.ceil(this.score)}`;\r\n        }\r\n\r\n        if (this.state) {\r\n            this.bns();\r\n            this.move();\r\n            this.updateBarrier();\r\n        }\r\n    }\r\n\r\n    onLateUpdate() {\r\n        if (this.state) {\r\n            transform = this.airplane.getCompOne(BTrigger);\r\n            if (transform) {\r\n                if (transform.inner.length > 0 && this.state) {\r\n                    for (const inner of transform.inner) {\r\n                        if (inner.owner.hasTag('bonus')) {\r\n                            if (inner.owner.hasTag('bm')) {\r\n                                this.bonus.bm = true;\r\n                                this.bonus.bmt = this.time.time;\r\n                            }\r\n                            if (inner.owner.hasTag('sp')) {\r\n                                this.bonus.sp = true;\r\n                                this.bonus.spt = this.time.time;\r\n                            }\r\n                            if (inner.owner.hasTag('st')) {\r\n                                this.bonus.st = true;\r\n                                this.bonus.stt = this.time.time;\r\n                            }\r\n                        } else {\r\n                            this.time.timeScale = 0;\r\n                            this.state = 0;\r\n                            setTimeout(() => {\r\n                                this.uiresult.innerHTML = `${Math.ceil(this.score)}`;\r\n                                this.uibg.style.display = 'block';\r\n                                this.startMoveBarrier();\r\n                            }, 1000);\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    bns() {\r\n        // TODO --------------------\r\n        if (this.input.keyState(this.input.VK_Q)) {\r\n            this.bonus.bm = true;\r\n            this.bonus.bmt = this.time.time;\r\n        }\r\n        if (this.input.keyState(this.input.VK_W)) {\r\n            this.bonus.sp = true;\r\n            this.bonus.spt = this.time.time;\r\n        }\r\n        if (this.input.keyState(this.input.VK_E)) {\r\n            this.bonus.st = true;\r\n            this.bonus.stt = this.time.time;\r\n        }\r\n        // TODO --------------------\r\n\r\n        this.mul = 1;\r\n        if (this.bonus.bm) {\r\n            if (this.time.time - this.bonus.bmt > BONUS_TIME) {\r\n                this.bonus.bm = false;\r\n                this.bonus.bmt = this.time.time;\r\n            }\r\n            this.uibm.innerHTML = 'FLY';\r\n            this.mul += 0.5;\r\n        } else {\r\n            this.uibm.innerHTML = '';\r\n        }\r\n        if (this.bonus.sp) {\r\n            if (this.time.time - this.bonus.spt > BONUS_TIME) {\r\n                this.bonus.sp = false;\r\n                this.bonus.bmt = this.time.time;\r\n            }\r\n            this.uisp.innerHTML = 'SP';\r\n            this.mul += 0.5;\r\n        } else {\r\n            this.uisp.innerHTML = '';\r\n        }\r\n        if (this.bonus.st) {\r\n            if (this.time.time - this.bonus.stt > BONUS_TIME) {\r\n                this.bonus.st = false;\r\n                this.bonus.bmt = this.time.time;\r\n            }\r\n            this.uist.innerHTML = 'ST';\r\n            this.mul += 0.5;\r\n        } else {\r\n            this.uist.innerHTML = '';\r\n        }\r\n        if (this.mul !== 1) {\r\n            this.uiscr.innerHTML = `x${this.mul}`;\r\n        } else {\r\n            this.uiscr.innerHTML = '';\r\n        }\r\n\r\n        if (this.bonus.sp) this.zspeed = 800;\r\n        else this.zspeed = 500;\r\n\r\n        if (this.bonus.st) this.xspeed = 3;\r\n        else this.xspeed = 2;\r\n\r\n        if (this.bonus.bm) {\r\n            this.yPos += 48 * this.time.deltaTime;\r\n            if (this.yPos > 30) this.yPos = 30;\r\n        } else {\r\n            this.yPos -= 12 * this.time.deltaTime;\r\n            if (this.yPos < 6) this.yPos = 6;\r\n        }\r\n\r\n        // TODO --------------------\r\n        if (this.input.keyState(this.input.VK_SPACE)) {\r\n            this.zspeed = 0;\r\n        }\r\n        // TODO --------------------\r\n    }\r\n\r\n    move() {\r\n        if (this.state === 1) this.movement.limearSpeed.z = -this.zspeed;\r\n        else this.movement.limearSpeed.z = 0;\r\n\r\n        transform = this.g1.getCompOne(Transform);\r\n        if (transform && transform.position.z < -510) transform.position.z += 4000;\r\n        transform = this.g2.getCompOne(Transform);\r\n        if (transform && transform.position.z < -510) transform.position.z += 4000;\r\n        transform = this.g3.getCompOne(Transform);\r\n        if (transform && transform.position.z < -510) transform.position.z += 4000;\r\n        transform = this.g4.getCompOne(Transform);\r\n        if (transform && transform.position.z < -510) transform.position.z += 4000;\r\n\r\n        transform = this.airplane.getCompOne(Transform);\r\n        if (transform) {\r\n            tmp = 0;\r\n            if (this.input.keyState(this.input.VK_LEFT)) tmp += 0.5;\r\n            if (this.input.keyState(this.input.VK_RIGHT)) tmp -= 0.5;\r\n            if (this.input.keyState(this.input.VK_LBUTTON)) {\r\n                if (this.input.mousePos().x > this.screen.widthNPR * 0.5) tmp -= 0.5;\r\n                else tmp += 0.5;\r\n            }\r\n\r\n            if (tmp > 0) {\r\n                this.xmove += 3 * this.time.deltaTime * this.xspeed;\r\n                if (this.xmove > this.xspeed) this.xmove = this.xspeed;\r\n            } else if (tmp < 0) {\r\n                this.xmove -= 3 * this.time.deltaTime * this.xspeed;\r\n                if (this.xmove < -this.xspeed) this.xmove = -this.xspeed;\r\n            } else if (this.xmove > 0) {\r\n                this.xmove -= 3 * this.time.deltaTime * this.xspeed;\r\n                if (this.xmove < 0) this.xmove = 0;\r\n            } else if (this.xmove < 0) {\r\n                this.xmove += 3 * this.time.deltaTime * this.xspeed;\r\n                if (this.xmove > 0) this.xmove = 0;\r\n            }\r\n\r\n            transform.orientation.fromAxisAngle(zAxis, this.xmove * 0.15);\r\n            transform.position.x -= this.xmove * this.xspeed * 30 * this.time.deltaTime;\r\n            if (transform.position.x < -212) transform.position.x = -212;\r\n            if (transform.position.x > 216) transform.position.x = 216;\r\n            transform.position.y = this.yPos;\r\n        }\r\n\r\n        transform = this.camera.getCompOne(Transform);\r\n        if (transform) {\r\n            transform.position.x -= this.xmove * this.xspeed * 30 * this.time.deltaTime;\r\n            if (transform.position.x < -212) transform.position.x = -212;\r\n            if (transform.position.x > 216) transform.position.x = 216;\r\n            transform.position.y = this.yPos + 4;\r\n        }\r\n        transform = this.camera.getCompOne(OrbitControl);\r\n        if (transform) {\r\n            transform.nupd = true;\r\n        }\r\n    }\r\n\r\n    start() {\r\n        this.score = 0;\r\n        this.uiscore.innerText = '0';\r\n        this.xmove = 0;\r\n        this.bonus.bm = false;\r\n        this.bonus.sp = false;\r\n        this.bonus.st = false;\r\n        this.bonus.bmt = 0;\r\n        this.bonus.spt = 0;\r\n        this.bonus.stt = 0;\r\n        transform = this.airplane.getCompOne(Transform);\r\n        if (transform) transform.position.x = 0;\r\n        transform = this.camera.getCompOne(Transform);\r\n        if (transform) transform.position.x = 0;\r\n        transform = this.camera.getCompOne(OrbitControl);\r\n        if (transform) transform.nupd = true;\r\n    }\r\n\r\n    createBarrier(core) {\r\n        for (it = 0; it < BARRIER_MAX; it++) {\r\n            tPos.x = (Math.random() - 0.5) * 440;\r\n            tPos.y = 0;\r\n            tPos.z = 3000 + Math.random() * 2000;\r\n\r\n            if (it < 50) Helper.createSphere(core, this.barrier, it, tPos);\r\n            else if (it < 62) Helper.createPillar1(core, this.barrier, it, tPos);\r\n            else if (it < 74) Helper.createPillar2(core, this.barrier, it, tPos);\r\n            else if (it < 86) Helper.createPillar3(core, this.barrier, it, tPos);\r\n            else if (it < 98) Helper.createPillar4(core, this.barrier, it, tPos);\r\n            else if (it < 110) Helper.createPillar5(core, this.barrier, it, tPos);\r\n            else if (it < 113) Helper.createColumn1(core, this.barrier, it, tPos);\r\n            else if (it < 116) Helper.createColumn2(core, this.barrier, it, tPos);\r\n            else if (it < 119) Helper.createColumn3(core, this.barrier, it, tPos);\r\n            else if (it < 122) Helper.createTunnel1(core, this.barrier, it, tPos);\r\n            else if (it < 125) Helper.createTunnel2(core, this.barrier, it, tPos);\r\n            else if (it < 128) Helper.createTrain(core, this.barrier, it, tPos);\r\n            else if (it < 129) Helper.createBonusBM(core, this.barrier, it, tPos);\r\n            else if (it < 130) Helper.createBonusSP(core, this.barrier, it, tPos);\r\n            else if (it < 131) Helper.createBonusST(core, this.barrier, it, tPos);\r\n        }\r\n    }\r\n\r\n    updateBarrier() {\r\n        for (it = 0; it < BARRIER_MAX; it++) {\r\n            if (!this.barrier[it]) continue;\r\n            transform = this.barrier[it].getCompOne(Transform);\r\n            if (transform) {\r\n                if (transform.position.z < -20) {\r\n                    tPos.x = (Math.random() - 0.5) * 440;\r\n                    tPos.y = 0;\r\n                    tPos.z = 3000 + Math.random() * 2000;\r\n\r\n                    if (it < 50) Helper.moveSphere(this.barrier, it, tPos);\r\n                    else if (it < 125) Helper.moveStatic(this.barrier, it, tPos);\r\n                    else if (it < 128) Helper.moveTrain(this.barrier, it, tPos);\r\n                    else Helper.moveStatic(this.barrier, it, tPos);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    startMoveBarrier() {\r\n        for (it = 0; it < BARRIER_MAX; it++) {\r\n            if (!this.barrier[it]) continue;\r\n            transform = this.barrier[it].getCompOne(Transform);\r\n            if (transform) {\r\n                tPos.x = (Math.random() - 0.5) * 440;\r\n                tPos.y = 0;\r\n                tPos.z = 3000 + Math.random() * 2000;\r\n\r\n                if (it < 50) Helper.moveSphere(this.barrier, it, tPos);\r\n                else if (it < 125) Helper.moveStatic(this.barrier, it, tPos);\r\n                else if (it < 128) Helper.moveTrain(this.barrier, it, tPos);\r\n                else Helper.moveStatic(this.barrier, it, tPos);\r\n            }\r\n        }\r\n    }\r\n\r\n    // =========================TEMP================================\r\n    // const e0 = core.newEntity(null, true);\r\n    // const c0 = core.newComp(Transform, e0, true, {});\r\n    // core.enableEntity(owner, false);\r\n    // core.enableComp(comp, false);\r\n    // core.delComp(c0);\r\n    // core.delEntity(e0);\r\n    // =========================TEMP================================\r\n}\r\n","export default class Vec2 {\r\n    constructor(x = 0, y = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n}\r\n","export default class Vec4 {\r\n    constructor(x = 0, y = 0, z = 0, w = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n    }\r\n\r\n    copy(vec) {\r\n        this.x = vec.x;\r\n        this.y = vec.y;\r\n        this.z = vec.z;\r\n        this.w = vec.w;\r\n        return this;\r\n    }\r\n}\r\n","export default class TLayer {\r\n    constructor(texture = null, layer = 0) {\r\n        this.texture = texture;\r\n        this.layer = layer;\r\n    }\r\n\r\n    copy(tlayer) {\r\n        this.texture = tlayer.texture;\r\n        this.layer = tlayer.layer;\r\n    }\r\n}\r\n","import Vec2 from '../Math/Vec2';\r\nimport Vec3 from '../Math/Vec3';\r\nimport Vec4 from '../Math/Vec4';\r\nimport Quat from '../Math/Quat';\r\nimport Mat4 from '../Math/Mat4';\r\nimport TLayer from '../Math/TLayer';\r\n\r\nexport default class Shader {\r\n    constructor() {\r\n        this.program = null;\r\n        this.uniform = {};\r\n        this.attribute = {};\r\n    }\r\n\r\n    use(core) {\r\n        core.gl.useProgram(this.program);\r\n    }\r\n\r\n    setUniform(core, uniformName, value) { // TODO!!!\r\n        switch (value.constructor) {\r\n            case Number:\r\n                core.gl.uniform2f(this.uniform[uniformName], value);\r\n                break;\r\n            case Vec2:\r\n                core.gl.uniform2f(this.uniform[uniformName], value.x, value.y);\r\n                break;\r\n            case Vec3:\r\n                core.gl.uniform3f(this.uniform[uniformName], value.x, value.y, value.z);\r\n                break;\r\n            case Vec4:\r\n            case Quat:\r\n                core.gl.uniform4f(this.uniform[uniformName], value.x, value.y, value.z, value.w);\r\n                break;\r\n            case TLayer:\r\n                core.gl.uniform1i(this.uniform[uniformName], value.layer);\r\n                value.texture.use(core, value.layer);\r\n                break;\r\n            case Mat4:\r\n                core.gl.uniformMatrix4fv(this.uniform[uniformName], false, value);\r\n                break;\r\n            default: throw new Error('Type of value not found');\r\n        }\r\n    }\r\n}\r\n","import { Loader } from '../Core/Core';\r\nimport Shader from '../Resources/Shader';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class RawShaderLoader extends Loader {\r\n    parse(obj) {\r\n        if (typeof obj.name !== 'string' || obj.name === '') throw new Error('Shader not named');\r\n        const gl = this.core.gl;\r\n        const vsh = gl.createShader(gl.VERTEX_SHADER);\r\n        const fsh = gl.createShader(gl.FRAGMENT_SHADER);\r\n        const shader = new Shader();\r\n        shader.program = gl.createProgram();\r\n\r\n        gl.shaderSource(vsh, obj.vs);\r\n        gl.compileShader(vsh);\r\n        gl.shaderSource(fsh, obj.fs);\r\n        gl.compileShader(fsh);\r\n\r\n        if (!gl.getShaderParameter(vsh, gl.COMPILE_STATUS)) {\r\n            throw new Error(gl.getShaderInfoLog(vsh));\r\n        }\r\n        if (!gl.getShaderParameter(fsh, gl.COMPILE_STATUS)) {\r\n            throw new Error(gl.getShaderInfoLog(fsh));\r\n        }\r\n\r\n        gl.attachShader(shader.program, vsh);\r\n        gl.attachShader(shader.program, fsh);\r\n        gl.linkProgram(shader.program);\r\n\r\n        if (!gl.getProgramParameter(shader.program, gl.LINK_STATUS)) {\r\n            throw new Error(gl.getProgramInfoLog(shader.program));\r\n        }\r\n\r\n        gl.deleteShader(vsh);\r\n        gl.deleteShader(fsh);\r\n\r\n        // Get unifornm\r\n        for (let i = 0; i < gl.getProgramParameter(shader.program, gl.ACTIVE_UNIFORMS); i++) {\r\n            const name = gl.getActiveUniform(shader.program, i).name;\r\n            if (!name.includes('gl_')) shader.uniform[name] = gl.getUniformLocation(shader.program, name);\r\n        }\r\n\r\n        // Get attribute\r\n        for (let i = 0; i < gl.getProgramParameter(shader.program, gl.ACTIVE_ATTRIBUTES); i++) {\r\n            const name = gl.getActiveAttrib(shader.program, i).name;\r\n            if (!name.includes('gl_')) shader.attribute[name] = gl.getAttribLocation(shader.program, name);\r\n        }\r\n\r\n        this.core.addRes('shader', obj.name, shader);\r\n\r\n        return Promise.resolve(shader);\r\n    }\r\n}\r\nRawShaderLoader.prototype[$name] = 'RawShaderLoader';\r\n","let gl = null;\r\n\r\nexport default class Material {\r\n    constructor() {\r\n        this.shader = null;\r\n        this.depthtest = true;\r\n        this.depthwrite = true;\r\n        this.cullFace = 0;\r\n        this.blend = 0;\r\n        this.uniform = {};\r\n        this.batch = false;\r\n    }\r\n\r\n    use(core) {\r\n        gl = core.gl;\r\n        this.shader.use(core);\r\n\r\n        // DEPTH_TEST\r\n        if (this.depthtest) gl.enable(gl.DEPTH_TEST);\r\n        else gl.disable(gl.DEPTH_TEST);\r\n\r\n        // DEPTH_WRITE\r\n        gl.depthMask(this.depthwrite);\r\n\r\n        // CULL_FACE\r\n        switch (this.cullFace) {\r\n            case 0: gl.disable(gl.CULL_FACE); break;\r\n            case 1: gl.enable(gl.CULL_FACE); gl.cullFace(gl.BACK); break;\r\n            case 2: gl.enable(gl.CULL_FACE); gl.cullFace(gl.FRONT); break;\r\n            case 3: gl.enable(gl.CULL_FACE); gl.cullFace(gl.FRONT_AND_BACK); break;\r\n            default: gl.disable(gl.CULL_FACE); break;\r\n        }\r\n\r\n        // BLEND\r\n        switch (this.blend) { // TODO!!!\r\n            case 0: gl.disable(gl.BLEND); break;\r\n            case 1: gl.enable(gl.BLEND); break;\r\n            default: gl.disable(gl.BLEND); break;\r\n        }\r\n\r\n        // UNIFORMS\r\n        for (const key in this.uniform) {\r\n            this.shader.setUniform(core, key, this.uniform[key]);\r\n        }\r\n    }\r\n}\r\n","import { Loader } from '../Core/Core';\r\nimport Material from '../Resources/Material';\r\nimport Vec2 from '../Math/Vec2';\r\nimport Vec3 from '../Math/Vec3';\r\nimport Vec4 from '../Math/Vec4';\r\nimport TLayer from '../Math/TLayer';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class MaterialLoader extends Loader {\r\n    parse(obj) {\r\n        if (typeof obj.name !== 'string' || obj.name === '') throw new Error('Material not named');\r\n\r\n        const material = new Material();\r\n        material.shader = obj.shader;\r\n        material.depthtest = obj.depthtest !== undefined ? obj.depthtest : true;\r\n        material.depthwrite = obj.depthwrite !== undefined ? obj.depthwrite : true;\r\n        material.cullFace = obj.cullFace !== undefined ? obj.cullFace : 0;\r\n        material.blend = obj.blend !== undefined ? obj.blend : 0;\r\n        material.batch = obj.batch !== undefined ? obj.batch : false;\r\n\r\n        for (const name in obj.uniform) {\r\n            switch (obj.uniform[name].type) { // TODO!!!\r\n                case 'Float':\r\n                    material.uniform[name] = obj.uniform[name].value;\r\n                    break;\r\n                case 'Vec2':\r\n                    material.uniform[name] = new Vec2();\r\n                    material.uniform[name].copy(obj.uniform[name].value);\r\n                    break;\r\n                case 'Vec3':\r\n                    material.uniform[name] = new Vec3();\r\n                    material.uniform[name].copy(obj.uniform[name].value);\r\n                    break;\r\n                case 'Vec4':\r\n                    material.uniform[name] = new Vec4();\r\n                    material.uniform[name].copy(obj.uniform[name].value);\r\n                    break;\r\n                case 'Texture':\r\n                    material.uniform[name] = new TLayer();\r\n                    material.uniform[name].copy(obj.uniform[name].value);\r\n                    break;\r\n                default: throw new Error('Uniform type not found');\r\n            }\r\n        }\r\n\r\n        this.core.addRes('material', obj.name, material);\r\n\r\n        return Promise.resolve(material);\r\n    }\r\n    conf(material) {\r\n        material.shader = this.core.getRes('shader', material.shader);\r\n        for (const key in material.uniform) {\r\n            if (material.uniform[key] instanceof TLayer) {\r\n                material.uniform[key].texture = this.core.getRes('texture', material.uniform[key].texture);\r\n            }\r\n        }\r\n        return Promise.resolve(material);\r\n    }\r\n}\r\nMaterialLoader.prototype[$name] = 'MaterialLoader';\r\n","import { Loader } from '../Core/Core';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class ImageLoader extends Loader {\r\n    load(file) {\r\n        return new Promise((rv, rj) => {\r\n            const image = new Image();\r\n            const name = file.substring(file.lastIndexOf('/') + 1, file.lastIndexOf('.'));\r\n            image.onload = () => { rv(image); this.core.addRes('image', name, image); };\r\n            image.onerror = () => { rj(image); };\r\n            image.src = file;\r\n        });\r\n    }\r\n}\r\nImageLoader.prototype[$name] = 'ImageLoader';\r\n","let gl = null;\r\n\r\nexport default class Texture {\r\n    constructor() {\r\n        this.image = null;\r\n        this.tex = null;\r\n        this.type = 0x0DE1;\r\n    }\r\n\r\n    use(core, layer) {\r\n        gl = core.gl;\r\n        gl.activeTexture(gl.TEXTURE0 + layer);\r\n        gl.bindTexture(this.type, this.tex);\r\n    }\r\n}\r\n","import { Loader } from '../Core/Core';\r\nimport Texture from '../Resources/Texture';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class Texture2DLoader extends Loader { // TODO!!!\r\n    parse(obj) {\r\n        if (typeof obj.name !== 'string' || obj.name === '') throw new Error('Texture not named');\r\n        const gl = this.core.gl;\r\n\r\n        const texture = new Texture();\r\n        texture.image = obj.image;\r\n        texture.type = gl.TEXTURE_2D;\r\n        texture.tex = gl.createTexture();\r\n\r\n        this.core.addRes('texture', obj.name, texture);\r\n        return Promise.resolve(texture);\r\n    }\r\n    conf(texture) {\r\n        const gl = this.core.gl;\r\n        texture.image = this.core.getRes('image', texture.image);\r\n\r\n        gl.bindTexture(gl.TEXTURE_2D, texture.tex);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.image);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n        // gl.texParameterf(gl.TEXTURE_2D, gl.TEXTURE_MAX_ANISOTROPY_EXT, 8); // TODO!!!\r\n        gl.generateMipmap(gl.TEXTURE_2D);\r\n        gl.bindTexture(gl.TEXTURE_2D, null);\r\n\r\n        return Promise.resolve(texture);\r\n    }\r\n}\r\nTexture2DLoader.prototype[$name] = 'Texture2DLoader';\r\n","let gl = null;\r\n\r\nexport default class Geometry {\r\n    constructor() {\r\n        this.attribute = {};\r\n        this.length = 0;\r\n        this.vbo = null;\r\n        this.ebo = null;\r\n    }\r\n\r\n    use(core, shader) { // TODO!!! TEMP NEED RECODE!!!\r\n        gl = core.gl;\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\r\n        for (const attr in this.attribute) {\r\n            if (shader.attribute[attr] !== undefined) {\r\n                gl.enableVertexAttribArray(shader.attribute[attr]);\r\n                gl.vertexAttribPointer(\r\n                    shader.attribute[attr],\r\n                    this.attribute[attr].size,\r\n                    this.attribute[attr].type,\r\n                    false,\r\n                    this.attribute[attr].stride,\r\n                    this.attribute[attr].offset\r\n                );\r\n            }\r\n        }\r\n\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ebo);\r\n        gl.drawElements(gl.TRIANGLES, this.length, gl.UNSIGNED_SHORT, 0);\r\n\r\n        for (const attr in this.attribute) {\r\n            if (shader.attribute[attr] !== undefined) gl.disableVertexAttribArray(shader.attribute[attr]);\r\n        }\r\n    }\r\n}\r\n","import { Loader } from '../Core/Core';\r\nimport Geometry from '../Resources/Geometry';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class GeometryLoader extends Loader {\r\n    parse(obj) {\r\n        if (typeof obj.name !== 'string' || obj.name === '') throw new Error('Geometry not named');\r\n\r\n        const gl = this.core.gl;\r\n        const geometry = new Geometry();\r\n\r\n        for (const key in obj.attribute) {\r\n            geometry.attribute[key] = obj.attribute[key];\r\n        }\r\n        geometry.vbo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, geometry.vbo);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(obj.vbo), gl.STATIC_DRAW);\r\n\r\n        geometry.ebo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, geometry.ebo);\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(obj.ebo), gl.STATIC_DRAW);\r\n        geometry.length = obj.ebo.length;\r\n\r\n        this.core.addRes('geometry', obj.name, geometry);\r\n        return Promise.resolve(geometry);\r\n    }\r\n}\r\nGeometryLoader.prototype[$name] = 'GeometryLoader';\r\n","import { Loader } from '../Core/Core';\r\n\r\nconst $name = Symbol.for('name');\r\n\r\nexport default class SceneLoader extends Loader {\r\n    parse(obj) {\r\n        const parse = [];\r\n        const loaders = [];\r\n\r\n        for (const res of obj.res) {\r\n            const loader = this.core.getLoader(res.loader);\r\n            loaders.push(loader);\r\n            if (typeof res.conf === 'string') {\r\n                parse.push(loader.load(res.conf).then(robj => loader.parse(robj)));\r\n            } else {\r\n                parse.push(loader.parse(res.conf));\r\n            }\r\n        }\r\n\r\n        return Promise.all(parse).then((parseRes) => {\r\n            const conf = [];\r\n            for (let i = 0; i < parseRes.length; i++) {\r\n                conf.push(loaders[i].conf(parseRes[i]));\r\n            }\r\n            return Promise.all(conf);\r\n        }).then(() => {\r\n            const ent = [];\r\n            let owner = null;\r\n            for (const entity of obj.ent) {\r\n                owner = (entity.owner !== undefined && entity.owner !== null) ? ent[entity.owner] : null;\r\n                const entt = this.core.newEntity(owner, entity.enable || true);\r\n                ent.push(entt);\r\n                if (entity.name) entt.name = entity.name;\r\n                if (entity.tags) {\r\n                    for (const tag of entity.tags) entt.addTag(tag);\r\n                }\r\n                if (entity.comp) {\r\n                    for (const comp of entity.comp) {\r\n                        const compClass = this.core.getCompClassByName(comp.type);\r\n                        if (comp.enable === undefined) comp.enable = true;\r\n                        this.core.newComp(compClass, entt, comp.enable, comp.conf);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nSceneLoader.prototype[$name] = 'SceneLoader';\r\n","import Core from '../fog_modules/Core/Core';\r\n\r\nimport Mesh from '../fog_modules/Components/Mesh';\r\nimport Camera from '../fog_modules/Components/Camera';\r\nimport Movement from '../fog_modules/Components/Movement';\r\nimport Rotation from '../fog_modules/Components/Rotation';\r\nimport ATrigger from '../fog_modules/Components/ATrigger';\r\nimport BTrigger from '../fog_modules/Components/BTrigger';\r\nimport STrigger from '../fog_modules/Components/STrigger';\r\nimport Animator from '../fog_modules/Components/Animator';\r\nimport Transform from '../fog_modules/Components/Transform';\r\nimport OrbitControl from '../fog_modules/Components/OrbitControl';\r\n\r\nimport TimeSystem from '../fog_modules/Systems/TimeSystem';\r\nimport InputSystem from '../fog_modules/Systems/InputSystem';\r\nimport ScreenSystem from '../fog_modules/Systems/ScreenSystem';\r\nimport RenderSystem from '../fog_modules/Systems/RenderSystem';\r\nimport RotationSystem from '../fog_modules/Systems/RotationSystem';\r\nimport MovementSystem from '../fog_modules/Systems/MovementSystem';\r\nimport OrbitControlSystem from '../fog_modules/Systems/OrbitControlSystem';\r\nimport TransformSystem from '../fog_modules/Systems/TransformSystem';\r\nimport TriggerSystem from '../fog_modules/Systems/TriggerSystem';\r\n// import AnimationSystem from '../fog_modules/Systems/AnimationSystem';\r\nimport GameSystem from '../fog_modules/Systems/GameSystem';\r\n\r\nimport RawShaderLoader from '../fog_modules/Loaders/RawShaderLoader';\r\nimport MaterialLoader from '../fog_modules/Loaders/MaterialLoader';\r\nimport ImageLoader from '../fog_modules/Loaders/ImageLoader';\r\nimport Texture2DLoader from '../fog_modules/Loaders/Texture2DLoader';\r\nimport GeometryLoader from '../fog_modules/Loaders/GeometryLoader';\r\n// import SkeletonLoader from '../fog_modules/Loaders/SkeletonLoader';\r\n// import AnimationLoader from '../fog_modules/Loaders/AnimationLoader';\r\nimport SceneLoader from '../fog_modules/Loaders/SceneLoader';\r\n\r\nconst core = new Core('app', {\r\n    alpha: false\r\n});\r\n\r\ncore.regLoader(new RawShaderLoader(core));\r\ncore.regLoader(new MaterialLoader(core));\r\ncore.regLoader(new ImageLoader(core));\r\ncore.regLoader(new Texture2DLoader(core));\r\ncore.regLoader(new GeometryLoader(core));\r\n// core.regLoader(new SkeletonLoader(core));\r\n// core.regLoader(new AnimationLoader(core));\r\ncore.regLoader(new SceneLoader(core));\r\n\r\ncore.regComp(Mesh);\r\ncore.regComp(Camera);\r\ncore.regComp(Movement);\r\ncore.regComp(Rotation);\r\ncore.regComp(ATrigger);\r\ncore.regComp(BTrigger);\r\ncore.regComp(STrigger);\r\ncore.regComp(Animator);\r\ncore.regComp(Transform);\r\ncore.regComp(OrbitControl);\r\n\r\ncore.regSystem(new TimeSystem(core));\r\ncore.regSystem(new InputSystem(core));\r\ncore.regSystem(new ScreenSystem(core));\r\ncore.regSystem(new RenderSystem(core));\r\ncore.regSystem(new RotationSystem(core));\r\ncore.regSystem(new MovementSystem(core));\r\ncore.regSystem(new OrbitControlSystem(core));\r\ncore.regSystem(new TransformSystem(core));\r\ncore.regSystem(new TriggerSystem(core));\r\n// core.regSystem(new AnimationSystem(core));\r\ncore.regSystem(new GameSystem(core));\r\n\r\ncore.loadRes('SceneLoader', './res/scene.json').then(() => { core.start(); });\r\n"],"sourceRoot":""}